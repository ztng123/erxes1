{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"meteor/kadira:flow-router","imported":["FlowRouter"],"specifiers":[{"kind":"named","imported":"FlowRouter","local":"FlowRouter"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/react-ui/auth/components/AuthBox.js","filenameRelative":"/imports/react-ui/auth/components/AuthBox.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/react-ui/auth/components/AuthBox.js.map","sourceFileName":"/imports/react-ui/auth/components/AuthBox.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"AuthBox"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.importSync(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar FlowRouter = void 0;\nmodule.importSync(\"meteor/kadira:flow-router\", {\n  FlowRouter: function (v) {\n    FlowRouter = v;\n  }\n}, 2);\nvar propTypes = {\n  user: PropTypes.object,\n  loggingIn: PropTypes.bool.isRequired,\n  loginWithPassword: PropTypes.func.isRequired,\n  logout: PropTypes.func.isRequired\n};\n\nvar AuthBox = function (_Component) {\n  (0, _inherits3.default)(AuthBox, _Component);\n\n  function AuthBox(props) {\n    (0, _classCallCheck3.default)(this, AuthBox);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    _this.state = {\n      email: '',\n      password: ''\n    };\n    _this.login = _this.login.bind(_this);\n    _this.logout = _this.logout.bind(_this);\n    _this.handleEmailChange = _this.handleEmailChange.bind(_this);\n    _this.handlePasswordChange = _this.handlePasswordChange.bind(_this);\n    return _this;\n  }\n\n  AuthBox.prototype.login = function () {\n    function login(e) {\n      e.preventDefault();\n      var _state = this.state,\n          email = _state.email,\n          password = _state.password;\n      this.props.loginWithPassword(email, password);\n    }\n\n    return login;\n  }();\n\n  AuthBox.prototype.logout = function () {\n    function logout(e) {\n      e.preventDefault();\n      this.props.logout(function () {\n        FlowRouter.go('auth/signIn');\n      });\n    }\n\n    return logout;\n  }();\n\n  AuthBox.prototype.handleEmailChange = function () {\n    function handleEmailChange(e) {\n      e.preventDefault();\n      this.setState({\n        email: e.target.value\n      });\n    }\n\n    return handleEmailChange;\n  }();\n\n  AuthBox.prototype.handlePasswordChange = function () {\n    function handlePasswordChange(e) {\n      e.preventDefault();\n      this.setState({\n        password: e.target.value\n      });\n    }\n\n    return handlePasswordChange;\n  }();\n\n  AuthBox.prototype.render = function () {\n    function render() {\n      var _props = this.props,\n          user = _props.user,\n          loggingIn = _props.loggingIn;\n\n      if (loggingIn) {\n        return React.createElement(\n          \"div\",\n          null,\n          \"Logging in ...\"\n        );\n      }\n\n      if (user) {\n        return React.createElement(\n          \"div\",\n          null,\n          user.emails[0].address,\n          \" |\\xA0\",\n          React.createElement(\n            \"a\",\n            {\n              href: \"#\"\n            },\n            \"Change password\"\n          ),\n          \" |\\xA0\",\n          React.createElement(\n            \"a\",\n            {\n              href: \"#\",\n              onClick: this.logout\n            },\n            \"Sign out\"\n          )\n        );\n      }\n\n      return React.createElement(\n        \"div\",\n        null,\n        React.createElement(\n          \"form\",\n          {\n            onSubmit: this.login\n          },\n          React.createElement(\"input\", {\n            type: \"text\",\n            placeholder: \"Email\",\n            value: this.state.email,\n            onChange: this.handleEmailChange\n          }),\n          React.createElement(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            value: this.state.password,\n            onChange: this.handlePasswordChange\n          }),\n          React.createElement(\"input\", {\n            type: \"submit\",\n            value: \"Sign in\"\n          })\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return AuthBox;\n}(Component);\n\nAuthBox.propTypes = propTypes;\nmodule.export(\"default\", exports.default = AuthBox);","map":{"version":3,"sources":["/imports/react-ui/auth/components/AuthBox.js"],"names":["React","Component","module","importSync","v","PropTypes","FlowRouter","propTypes","user","object","loggingIn","bool","isRequired","loginWithPassword","func","logout","AuthBox","props","state","email","password","login","bind","handleEmailChange","handlePasswordChange","e","preventDefault","go","setState","target","value","render","emails","address","export","exports","default"],"mappings":"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","file":"/imports/react-ui/auth/components/AuthBox.js.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nconst propTypes = {\n  user: PropTypes.object,\n  loggingIn: PropTypes.bool.isRequired,\n  loginWithPassword: PropTypes.func.isRequired,\n  logout: PropTypes.func.isRequired,\n};\n\nclass AuthBox extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: '',\n      password: '',\n    };\n\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n  }\n\n  login(e) {\n    e.preventDefault();\n\n    const { email, password } = this.state;\n    this.props.loginWithPassword(email, password);\n  }\n\n  logout(e) {\n    e.preventDefault();\n\n    this.props.logout(() => {\n      FlowRouter.go('auth/signIn');\n    });\n  }\n\n  handleEmailChange(e) {\n    e.preventDefault();\n    this.setState({ email: e.target.value });\n  }\n\n  handlePasswordChange(e) {\n    e.preventDefault();\n    this.setState({ password: e.target.value });\n  }\n\n  render() {\n    const { user, loggingIn } = this.props;\n\n    if (loggingIn) {\n      return <div>Logging in ...</div>;\n    }\n\n    if (user) {\n      return (\n        <div>\n          {user.emails[0].address} |&nbsp;\n          <a href=\"#\">Change password</a> |&nbsp;\n          <a href=\"#\" onClick={this.logout}>Sign out</a>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <form onSubmit={this.login}>\n          <input\n            type=\"text\"\n            placeholder=\"Email\"\n            value={this.state.email}\n            onChange={this.handleEmailChange}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            value={this.state.password}\n            onChange={this.handlePasswordChange}\n          />\n          <input type=\"submit\" value=\"Sign in\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nAuthBox.propTypes = propTypes;\n\nexport default AuthBox;\n"]},"hash":"e5b2af6009307ed4ed9212094845d787e0d62868"}
