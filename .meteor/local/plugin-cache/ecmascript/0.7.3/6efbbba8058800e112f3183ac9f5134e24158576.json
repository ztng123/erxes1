{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/underscore","imported":["_"],"specifiers":[{"kind":"named","imported":"_","local":"_"}]},{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"meteor/erxes-notifier","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Alert"}]},{"source":"react-bootstrap","imported":["Modal","Button","ButtonToolbar","FormGroup","FormControl","ControlLabel","Checkbox"],"specifiers":[{"kind":"named","imported":"Modal","local":"Modal"},{"kind":"named","imported":"Button","local":"Button"},{"kind":"named","imported":"ButtonToolbar","local":"ButtonToolbar"},{"kind":"named","imported":"FormGroup","local":"FormGroup"},{"kind":"named","imported":"FormControl","local":"FormControl"},{"kind":"named","imported":"ControlLabel","local":"ControlLabel"},{"kind":"named","imported":"Checkbox","local":"Checkbox"}]},{"source":"./SelectBrand","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"SelectBrand"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/react-ui/settings/integrations/components/Facebook.js","filenameRelative":"/imports/react-ui/settings/integrations/components/Facebook.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/react-ui/settings/integrations/components/Facebook.js.map","sourceFileName":"/imports/react-ui/settings/integrations/components/Facebook.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"Facebook"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\n\nvar _ = void 0;\n\nmodule.importSync(\"meteor/underscore\", {\n  _: function (v) {\n    _ = v;\n  }\n}, 1);\nvar React = void 0,\n    Component = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 2);\nvar PropTypes = void 0;\nmodule.importSync(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 3);\nvar Alert = void 0;\nmodule.importSync(\"meteor/erxes-notifier\", {\n  \"default\": function (v) {\n    Alert = v;\n  }\n}, 4);\nvar Modal = void 0,\n    Button = void 0,\n    ButtonToolbar = void 0,\n    FormGroup = void 0,\n    FormControl = void 0,\n    ControlLabel = void 0,\n    Checkbox = void 0;\nmodule.importSync(\"react-bootstrap\", {\n  Modal: function (v) {\n    Modal = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  ButtonToolbar: function (v) {\n    ButtonToolbar = v;\n  },\n  FormGroup: function (v) {\n    FormGroup = v;\n  },\n  FormControl: function (v) {\n    FormControl = v;\n  },\n  ControlLabel: function (v) {\n    ControlLabel = v;\n  },\n  Checkbox: function (v) {\n    Checkbox = v;\n  }\n}, 5);\nvar SelectBrand = void 0;\nmodule.importSync(\"./SelectBrand\", {\n  \"default\": function (v) {\n    SelectBrand = v;\n  }\n}, 6);\n\nvar Facebook = function (_Component) {\n  (0, _inherits3.default)(Facebook, _Component);\n\n  function Facebook(props, context) {\n    (0, _classCallCheck3.default)(this, Facebook);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props, context));\n\n    _this.handleSubmit = _this.handleSubmit.bind(_this);\n    _this.onAppChange = _this.onAppChange.bind(_this);\n    _this.state = {\n      apps: [],\n      pages: []\n    };\n    return _this;\n  }\n\n  Facebook.prototype.componentDidMount = function () {\n    function componentDidMount() {\n      var _this2 = this;\n\n      var apps = this.state.apps;\n\n      if (apps.length === 0) {\n        Meteor.call('integrations.getFacebookAppList', function (err, res) {\n          _this2.setState({\n            apps: res\n          });\n        });\n      }\n    }\n\n    return componentDidMount;\n  }();\n\n  Facebook.prototype.onAppChange = function () {\n    function onAppChange() {\n      var _this3 = this;\n\n      var appId = document.getElementById('app').value;\n      Meteor.call('integrations.getFacebookPageList', {\n        appId: appId\n      }, function (err, res) {\n        if (err) {\n          return Alert.error(err.reason);\n        }\n\n        _this3.setState({\n          pages: res\n        });\n      });\n    }\n\n    return onAppChange;\n  }();\n\n  Facebook.prototype.collectCheckboxValues = function () {\n    function collectCheckboxValues(name) {\n      var values = [];\n\n      _.each(document.getElementsByName(name), function (elem) {\n        if (elem.checked) {\n          values.push(elem.value);\n        }\n      });\n\n      return values;\n    }\n\n    return collectCheckboxValues;\n  }();\n\n  Facebook.prototype.handleSubmit = function () {\n    function handleSubmit(e) {\n      e.preventDefault();\n      this.props.save({\n        name: document.getElementById('name').value,\n        brandId: document.getElementById('selectBrand').value,\n        appId: document.getElementById('app').value,\n        pageIds: this.collectCheckboxValues('pages')\n      });\n    }\n\n    return handleSubmit;\n  }();\n\n  Facebook.prototype.render = function () {\n    function render() {\n      var brands = this.props.brands;\n      var _state = this.state,\n          apps = _state.apps,\n          pages = _state.pages;\n      return React.createElement(\n        \"form\",\n        {\n          className: \"margined\",\n          onSubmit: this.handleSubmit\n        },\n        React.createElement(\n          FormGroup,\n          null,\n          React.createElement(\n            ControlLabel,\n            null,\n            \"Name\"\n          ),\n          React.createElement(FormControl, {\n            id: \"name\",\n            type: \"text\",\n            required: true\n          })\n        ),\n        React.createElement(SelectBrand, {\n          brands: brands\n        }),\n        React.createElement(\n          FormGroup,\n          {\n            controlId: \"app\"\n          },\n          React.createElement(\n            ControlLabel,\n            null,\n            \"App\"\n          ),\n          React.createElement(\n            FormControl,\n            {\n              componentClass: \"select\",\n              placeholder: \"Select app\",\n              onChange: this.onAppChange\n            },\n            React.createElement(\n              \"option\",\n              null,\n              \"Select app ...\"\n            ),\n            apps.map(function (app, index) {\n              return React.createElement(\n                \"option\",\n                {\n                  key: \"app\" + index,\n                  value: app.id\n                },\n                app.name\n              );\n            })\n          )\n        ),\n        React.createElement(\n          FormGroup,\n          null,\n          React.createElement(\n            ControlLabel,\n            null,\n            \"Pages\"\n          ),\n          pages.map(function (page) {\n            return React.createElement(\n              \"div\",\n              {\n                key: page.id\n              },\n              React.createElement(\n                Checkbox,\n                {\n                  name: \"pages\",\n                  key: page.id,\n                  value: page.id\n                },\n                page.name\n              )\n            );\n          })\n        ),\n        React.createElement(\n          Modal.Footer,\n          null,\n          React.createElement(\n            ButtonToolbar,\n            {\n              className: \"pull-right\"\n            },\n            React.createElement(\n              Button,\n              {\n                type: \"submit\",\n                bsStyle: \"primary\"\n              },\n              \"Save\"\n            )\n          )\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return Facebook;\n}(Component);\n\nFacebook.propTypes = {\n  save: PropTypes.func.isRequired,\n  brands: PropTypes.array.isRequired\n};\nmodule.export(\"default\", exports.default = Facebook);","map":{"version":3,"sources":["/imports/react-ui/settings/integrations/components/Facebook.js"],"names":["Meteor","module","importSync","v","_","React","Component","PropTypes","Alert","Modal","Button","ButtonToolbar","FormGroup","FormControl","ControlLabel","Checkbox","SelectBrand","Facebook","props","context","handleSubmit","bind","onAppChange","state","apps","pages","componentDidMount","length","call","err","res","setState","appId","document","getElementById","value","error","reason","collectCheckboxValues","name","values","each","getElementsByName","elem","checked","push","e","preventDefault","save","brandId","pageIds","render","brands","map","app","index","id","page","propTypes","func","isRequired","array","export","exports","default"],"mappings":"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","file":"/imports/react-ui/settings/integrations/components/Facebook.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { _ } from 'meteor/underscore';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Alert from 'meteor/erxes-notifier';\nimport {\n  Modal,\n  Button,\n  ButtonToolbar,\n  FormGroup,\n  FormControl,\n  ControlLabel,\n  Checkbox,\n} from 'react-bootstrap';\nimport SelectBrand from './SelectBrand';\n\nclass Facebook extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.onAppChange = this.onAppChange.bind(this);\n\n    this.state = { apps: [], pages: [] };\n  }\n\n  componentDidMount() {\n    const { apps } = this.state;\n\n    if (apps.length === 0) {\n      Meteor.call('integrations.getFacebookAppList', (err, res) => {\n        this.setState({ apps: res });\n      });\n    }\n  }\n\n  onAppChange() {\n    const appId = document.getElementById('app').value;\n\n    Meteor.call('integrations.getFacebookPageList', { appId }, (err, res) => {\n      if (err) {\n        return Alert.error(err.reason);\n      }\n\n      this.setState({ pages: res });\n    });\n  }\n\n  collectCheckboxValues(name) {\n    const values = [];\n\n    _.each(document.getElementsByName(name), elem => {\n      if (elem.checked) {\n        values.push(elem.value);\n      }\n    });\n\n    return values;\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    this.props.save({\n      name: document.getElementById('name').value,\n      brandId: document.getElementById('selectBrand').value,\n      appId: document.getElementById('app').value,\n      pageIds: this.collectCheckboxValues('pages'),\n    });\n  }\n\n  render() {\n    const { brands } = this.props;\n    const { apps, pages } = this.state;\n\n    return (\n      <form className=\"margined\" onSubmit={this.handleSubmit}>\n        <FormGroup>\n          <ControlLabel>Name</ControlLabel>\n\n          <FormControl id=\"name\" type=\"text\" required />\n        </FormGroup>\n\n        <SelectBrand brands={brands} />\n\n        <FormGroup controlId=\"app\">\n          <ControlLabel>App</ControlLabel>\n\n          <FormControl componentClass=\"select\" placeholder=\"Select app\" onChange={this.onAppChange}>\n            <option>Select app ...</option>\n\n            {apps.map((app, index) => (\n              <option key={`app${index}`} value={app.id}>{app.name}</option>\n            ))}\n          </FormControl>\n        </FormGroup>\n\n        <FormGroup>\n          <ControlLabel>Pages</ControlLabel>\n\n          {pages.map(page => (\n            <div key={page.id}>\n              <Checkbox name=\"pages\" key={page.id} value={page.id}>\n                {page.name}\n              </Checkbox>\n            </div>\n          ))}\n        </FormGroup>\n\n        <Modal.Footer>\n          <ButtonToolbar className=\"pull-right\">\n            <Button type=\"submit\" bsStyle=\"primary\">Save</Button>\n          </ButtonToolbar>\n        </Modal.Footer>\n      </form>\n    );\n  }\n}\n\nFacebook.propTypes = {\n  save: PropTypes.func.isRequired,\n  brands: PropTypes.array.isRequired,\n};\n\nexport default Facebook;\n"]},"hash":"6efbbba8058800e112f3183ac9f5134e24158576"}
