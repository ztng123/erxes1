{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react-bootstrap","imported":["FormGroup","ControlLabel","FormControl","Col","Grid","Row"],"specifiers":[{"kind":"named","imported":"FormGroup","local":"FormGroup"},{"kind":"named","imported":"ControlLabel","local":"ControlLabel"},{"kind":"named","imported":"FormControl","local":"FormControl"},{"kind":"named","imported":"Col","local":"Col"},{"kind":"named","imported":"Grid","local":"Grid"},{"kind":"named","imported":"Row","local":"Row"}]},{"source":"meteor/erxes-notifier","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Alert"}]},{"source":"/imports/api/client/uploadHandler","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"uploadHandler"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/react-ui/auth/components/UserCommonInfos.js","filenameRelative":"/imports/react-ui/auth/components/UserCommonInfos.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/react-ui/auth/components/UserCommonInfos.js.map","sourceFileName":"/imports/react-ui/auth/components/UserCommonInfos.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"UserCommonInfos"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.importSync(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar FormGroup = void 0,\n    ControlLabel = void 0,\n    FormControl = void 0,\n    Col = void 0,\n    Grid = void 0,\n    Row = void 0;\nmodule.importSync(\"react-bootstrap\", {\n  FormGroup: function (v) {\n    FormGroup = v;\n  },\n  ControlLabel: function (v) {\n    ControlLabel = v;\n  },\n  FormControl: function (v) {\n    FormControl = v;\n  },\n  Col: function (v) {\n    Col = v;\n  },\n  Grid: function (v) {\n    Grid = v;\n  },\n  Row: function (v) {\n    Row = v;\n  }\n}, 2);\nvar Alert = void 0;\nmodule.importSync(\"meteor/erxes-notifier\", {\n  \"default\": function (v) {\n    Alert = v;\n  }\n}, 3);\nvar uploadHandler = void 0;\nmodule.importSync(\"/imports/api/client/uploadHandler\", {\n  \"default\": function (v) {\n    uploadHandler = v;\n  }\n}, 4);\nvar propTypes = {\n  user: PropTypes.object.isRequired\n};\n\nvar UserCommonInfos = function (_Component) {\n  (0, _inherits3.default)(UserCommonInfos, _Component);\n\n  function UserCommonInfos(props) {\n    (0, _classCallCheck3.default)(this, UserCommonInfos);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    var defaultAvatar = '/images/userDefaultIcon.png';\n    _this.state = {\n      avatar: _this.props.user.details.avatar,\n      avatarPreviewUrl: _this.props.user.details.avatar || defaultAvatar,\n      avatarPreviewStyle: {},\n      hover: true\n    };\n    _this.handleImageChange = _this.handleImageChange.bind(_this);\n    _this.mouseOver = _this.mouseOver.bind(_this);\n    _this.mouseOut = _this.mouseOut.bind(_this);\n    return _this;\n  }\n\n  UserCommonInfos.prototype.mouseOver = function () {\n    function mouseOver() {\n      this.setState({\n        hover: true\n      });\n    }\n\n    return mouseOver;\n  }();\n\n  UserCommonInfos.prototype.mouseOut = function () {\n    function mouseOut() {\n      this.setState({\n        hover: true\n      });\n    }\n\n    return mouseOut;\n  }();\n\n  UserCommonInfos.prototype.handleImageChange = function () {\n    function handleImageChange(e) {\n      var _this2 = this;\n\n      var imageFile = e.target.files[0];\n      uploadHandler({\n        file: imageFile,\n        beforeUpload: function () {\n          _this2.setState({\n            avatarPreviewStyle: {\n              opacity: '0.2'\n            }\n          });\n        },\n        afterUpload: function (_ref) {\n          var response = _ref.response;\n\n          _this2.setState({\n            avatar: response.url,\n            avatarPreviewStyle: {\n              opacity: '1'\n            }\n          });\n\n          Alert.info('Looking good!');\n        },\n        afterRead: function (_ref2) {\n          var result = _ref2.result;\n\n          _this2.setState({\n            avatarPreviewUrl: result\n          });\n        }\n      });\n    }\n\n    return handleImageChange;\n  }();\n\n  UserCommonInfos.prototype.render = function () {\n    function render() {\n      var user = this.props.user;\n      var _state = this.state,\n          avatar = _state.avatar,\n          avatarPreviewStyle = _state.avatarPreviewStyle,\n          avatarPreviewUrl = _state.avatarPreviewUrl;\n      return React.createElement(\n        Grid,\n        null,\n        React.createElement(\n          Row,\n          {\n            className: \"show-grid\"\n          },\n          React.createElement(\n            Col,\n            {\n              xs: 6,\n              md: 4\n            },\n            React.createElement(\n              FormGroup,\n              null,\n              React.createElement(\n                ControlLabel,\n                null,\n                \"Photo\"\n              ),\n              React.createElement(\n                \"div\",\n                {\n                  className: \"profileCircleImg\",\n                  onMouseOver: this.mouseOver.bind(this),\n                  onMouseOut: this.mouseOut.bind(this)\n                },\n                React.createElement(\"img\", {\n                  alt: \"avatar\",\n                  className: \"avatar\",\n                  style: avatarPreviewStyle,\n                  src: avatarPreviewUrl\n                }),\n                this.state.hover ? React.createElement(\n                  \"span\",\n                  {\n                    className: \"profileSelector\"\n                  },\n                  \"Upload Image\"\n                ) : null\n              ),\n              React.createElement(FormControl, {\n                type: \"file\",\n                onChange: this.handleImageChange\n              }),\n              React.createElement(\"input\", {\n                type: \"hidden\",\n                id: \"avatar\",\n                value: avatar\n              })\n            )\n          ),\n          React.createElement(\n            Col,\n            {\n              xs: 12,\n              md: 8\n            },\n            React.createElement(\n              FormGroup,\n              null,\n              React.createElement(\n                ControlLabel,\n                null,\n                \"Name\"\n              ),\n              React.createElement(FormControl, {\n                type: \"text\",\n                id: \"fullName\",\n                defaultValue: user.details.fullName\n              })\n            ),\n            React.createElement(\n              FormGroup,\n              null,\n              React.createElement(\n                ControlLabel,\n                null,\n                \"Position\"\n              ),\n              React.createElement(FormControl, {\n                type: \"text\",\n                id: \"position\",\n                defaultValue: user.details.position\n              })\n            ),\n            React.createElement(\n              FormGroup,\n              null,\n              React.createElement(\n                ControlLabel,\n                null,\n                \"Username\"\n              ),\n              React.createElement(FormControl, {\n                type: \"text\",\n                id: \"username\",\n                defaultValue: user.username\n              })\n            ),\n            React.createElement(\n              FormGroup,\n              null,\n              React.createElement(\n                ControlLabel,\n                null,\n                \"Email\"\n              ),\n              React.createElement(FormControl, {\n                type: \"email\",\n                id: \"email\",\n                defaultValue: user.emails[0].address\n              })\n            ),\n            React.createElement(\n              FormGroup,\n              null,\n              React.createElement(\n                ControlLabel,\n                null,\n                \"Twitter username\"\n              ),\n              React.createElement(FormControl, {\n                type: \"text\",\n                id: \"twitterUsername\",\n                defaultValue: user.details.twitterUsername\n              })\n            )\n          )\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return UserCommonInfos;\n}(Component);\n\nUserCommonInfos.propTypes = propTypes;\nmodule.export(\"default\", exports.default = UserCommonInfos);","map":{"version":3,"sources":["/imports/react-ui/auth/components/UserCommonInfos.js"],"names":["React","Component","module","importSync","v","PropTypes","FormGroup","ControlLabel","FormControl","Col","Grid","Row","Alert","uploadHandler","propTypes","user","object","isRequired","UserCommonInfos","props","defaultAvatar","state","avatar","details","avatarPreviewUrl","avatarPreviewStyle","hover","handleImageChange","bind","mouseOver","mouseOut","setState","e","imageFile","target","files","file","beforeUpload","opacity","afterUpload","response","url","info","afterRead","result","render","fullName","position","username","emails","address","twitterUsername","export","exports","default"],"mappings":";;;;;;;;;;;;;;AAAA,IAAIA,cAAJ;AAAA,IAAUC,kBAAV;AAAoBC,OAAOC,UAAP,CAAkB,OAAlB,EAA0B;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACJ,YAAMI,CAAN;AAAQ,GAA7B;AAA8BH,aAAU,UAASG,CAAT,EAAW;AAACH,gBAAUG,CAAV;AAAY;AAAhE,CAA1B,EAA4F,CAA5F;AAA+F,IAAIC,kBAAJ;AAAcH,OAAOC,UAAP,CAAkB,YAAlB,EAA+B;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACC,gBAAUD,CAAV;AAAY;AAAjC,CAA/B,EAAkE,CAAlE;AAAqE,IAAIE,kBAAJ;AAAA,IAAcC,qBAAd;AAAA,IAA2BC,oBAA3B;AAAA,IAAuCC,YAAvC;AAAA,IAA2CC,aAA3C;AAAA,IAAgDC,YAAhD;AAAoDT,OAAOC,UAAP,CAAkB,iBAAlB,EAAoC;AAACG,aAAU,UAASF,CAAT,EAAW;AAACE,gBAAUF,CAAV;AAAY,GAAnC;AAAoCG,gBAAa,UAASH,CAAT,EAAW;AAACG,mBAAaH,CAAb;AAAe,GAA5E;AAA6EI,eAAY,UAASJ,CAAT,EAAW;AAACI,kBAAYJ,CAAZ;AAAc,GAAnH;AAAoHK,OAAI,UAASL,CAAT,EAAW;AAACK,UAAIL,CAAJ;AAAM,GAA1I;AAA2IM,QAAK,UAASN,CAAT,EAAW;AAACM,WAAKN,CAAL;AAAO,GAAnK;AAAoKO,OAAI,UAASP,CAAT,EAAW;AAACO,UAAIP,CAAJ;AAAM;AAA1L,CAApC,EAAgO,CAAhO;AAAmO,IAAIQ,cAAJ;AAAUV,OAAOC,UAAP,CAAkB,uBAAlB,EAA0C;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACQ,YAAMR,CAAN;AAAQ;AAA7B,CAA1C,EAAyE,CAAzE;AAA4E,IAAIS,sBAAJ;AAAkBX,OAAOC,UAAP,CAAkB,mCAAlB,EAAsD;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACS,oBAAcT,CAAd;AAAgB;AAArC,CAAtD,EAA6F,CAA7F;AAMrkB,IAAMU,YAAY;AAChBC,QAAMV,UAAUW,MAAV,CAAiBC;AADP,CAAlB;;IAIMC,e;;;AACJ,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA,+DACjB,sBAAMA,KAAN,CADiB;;AAGjB,QAAMC,gBAAgB,6BAAtB;AAEA,UAAKC,KAAL,GAAa;AACXC,cAAQ,MAAKH,KAAL,CAAWJ,IAAX,CAAgBQ,OAAhB,CAAwBD,MADrB;AAEXE,wBAAkB,MAAKL,KAAL,CAAWJ,IAAX,CAAgBQ,OAAhB,CAAwBD,MAAxB,IAAkCF,aAFzC;AAGXK,0BAAoB,EAHT;AAIXC,aAAO;AAJI,KAAb;AAOA,UAAKC,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,OAAzB;AACA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeD,IAAf,OAAjB;AACA,UAAKE,QAAL,GAAgB,MAAKA,QAAL,CAAcF,IAAd,OAAhB;AAdiB;AAelB;;4BAEDC,S;yBAAW;AACT,WAAKE,QAAL,CAAc;AAAEL,eAAO;AAAT,OAAd;AACD;;;;;4BAEDI,Q;wBAAU;AACR,WAAKC,QAAL,CAAc;AAAEL,eAAO;AAAT,OAAd;AACD;;;;;4BAEDC,iB;+BAAkBK,C,EAAG;AAAA;;AACnB,UAAMC,YAAYD,EAAEE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAlB;AAEAtB,oBAAc;AACZuB,cAAMH,SADM;AAGZI,sBAAc,YAAM;AAClB,iBAAKN,QAAL,CAAc;AAAEN,gCAAoB;AAAEa,uBAAS;AAAX;AAAtB,WAAd;AACD,SALW;AAOZC,qBAAa,gBAAkB;AAAA,cAAfC,QAAe,QAAfA,QAAe;;AAC7B,iBAAKT,QAAL,CAAc;AACZT,oBAAQkB,SAASC,GADL;AAEZhB,gCAAoB;AAAEa,uBAAS;AAAX;AAFR,WAAd;;AAKA1B,gBAAM8B,IAAN,CAAW,eAAX;AACD,SAdW;AAgBZC,mBAAW,iBAAgB;AAAA,cAAbC,MAAa,SAAbA,MAAa;;AACzB,iBAAKb,QAAL,CAAc;AAAEP,8BAAkBoB;AAApB,WAAd;AACD;AAlBW,OAAd;AAoBD;;;;;4BAEDC,M;sBAAS;AACP,UAAM9B,OAAO,KAAKI,KAAL,CAAWJ,IAAxB;AADO,mBAEkD,KAAKM,KAFvD;AAAA,UAECC,MAFD,UAECA,MAFD;AAAA,UAESG,kBAFT,UAESA,kBAFT;AAAA,UAE6BD,gBAF7B,UAE6BA,gBAF7B;AAIP,aACE;AAAC,YAAD;AAAA;AACE;AAAC,aAAD;AAAA;AAAK,uBAAU;AAAf;AACE;AAAC,eAAD;AAAA;AAAK,kBAAI,CAAT;AAAY,kBAAI;AAAhB;AACC;AAAC,uBAAD;AAAA;AACG;AAAC,4BAAD;AAAA;AAAA;AAAA,eADH;AAEG;AAAA;AAAA;AAAK,6BAAU,kBAAf;AAAkC,+BAAa,KAAKK,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAA/C;AAA2E,8BAAY,KAAKE,QAAL,CAAcF,IAAd,CAAmB,IAAnB;AAAvF;AACE;AAAK,uBAAI,QAAT;AAAkB,6BAAU,QAA5B;AAAqC,yBAAOH,kBAA5C;AAAgE,uBAAKD;AAArE,kBADF;AAEC,qBAAKH,KAAL,CAAWK,KAAX,GAAmB;AAAA;AAAA;AAAM,+BAAU;AAAhB;AAAA;AAAA,iBAAnB,GAA2E;AAF5E,eAFH;AAMG,kCAAC,WAAD;AAAa,sBAAK,MAAlB;AAAyB,0BAAU,KAAKC;AAAxC,gBANH;AAOG;AAAO,sBAAK,QAAZ;AAAqB,oBAAG,QAAxB;AAAiC,uBAAOL;AAAxC;AAPH;AADD,WADF;AAaE;AAAC,eAAD;AAAA;AAAK,kBAAI,EAAT;AAAa,kBAAI;AAAjB;AACE;AAAC,uBAAD;AAAA;AACE;AAAC,4BAAD;AAAA;AAAA;AAAA,eADF;AAEE,kCAAC,WAAD;AAAa,sBAAK,MAAlB;AAAyB,oBAAG,UAA5B;AAAuC,8BAAcP,KAAKQ,OAAL,CAAauB;AAAlE;AAFF,aADF;AAME;AAAC,uBAAD;AAAA;AACE;AAAC,4BAAD;AAAA;AAAA;AAAA,eADF;AAEE,kCAAC,WAAD;AAAa,sBAAK,MAAlB;AAAyB,oBAAG,UAA5B;AAAuC,8BAAc/B,KAAKQ,OAAL,CAAawB;AAAlE;AAFF,aANF;AAWE;AAAC,uBAAD;AAAA;AACE;AAAC,4BAAD;AAAA;AAAA;AAAA,eADF;AAEE,kCAAC,WAAD;AAAa,sBAAK,MAAlB;AAAyB,oBAAG,UAA5B;AAAuC,8BAAchC,KAAKiC;AAA1D;AAFF,aAXF;AAgBE;AAAC,uBAAD;AAAA;AACE;AAAC,4BAAD;AAAA;AAAA;AAAA,eADF;AAEE,kCAAC,WAAD;AAAa,sBAAK,OAAlB;AAA0B,oBAAG,OAA7B;AAAqC,8BAAcjC,KAAKkC,MAAL,CAAY,CAAZ,EAAeC;AAAlE;AAFF,aAhBF;AAqBE;AAAC,uBAAD;AAAA;AACE;AAAC,4BAAD;AAAA;AAAA;AAAA,eADF;AAEE,kCAAC,WAAD;AACE,sBAAK,MADP;AAEE,oBAAG,iBAFL;AAGE,8BAAcnC,KAAKQ,OAAL,CAAa4B;AAH7B;AAFF;AArBF;AAbF;AADF,OADF;AAgDD;;;;;;EAvG2BlD,S;;AA0G9BiB,gBAAgBJ,SAAhB,GAA4BA,SAA5B;AApHAZ,OAAOkD,MAAP,CAAc,SAAd,EAAwBC,QAAQC,OAAR,GAsHTpC,eAtHf","file":"/imports/react-ui/auth/components/UserCommonInfos.js.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { FormGroup, ControlLabel, FormControl, Col, Grid, Row } from 'react-bootstrap';\nimport Alert from 'meteor/erxes-notifier';\nimport uploadHandler from '/imports/api/client/uploadHandler';\n\nconst propTypes = {\n  user: PropTypes.object.isRequired,\n};\n\nclass UserCommonInfos extends Component {\n  constructor(props) {\n    super(props);\n\n    const defaultAvatar = '/images/userDefaultIcon.png';\n\n    this.state = {\n      avatar: this.props.user.details.avatar,\n      avatarPreviewUrl: this.props.user.details.avatar || defaultAvatar,\n      avatarPreviewStyle: {},\n      hover: true\n    };\n\n    this.handleImageChange = this.handleImageChange.bind(this);\n    this.mouseOver = this.mouseOver.bind(this);\n    this.mouseOut = this.mouseOut.bind(this);\n  }\n\n  mouseOver(){\n    this.setState({ hover: true });\n  }\n\n  mouseOut(){\n    this.setState({ hover: true });\n  }\n\n  handleImageChange(e) {\n    const imageFile = e.target.files[0];\n\n    uploadHandler({\n      file: imageFile,\n\n      beforeUpload: () => {\n        this.setState({ avatarPreviewStyle: { opacity: '0.2' } });\n      },\n\n      afterUpload: ({ response }) => {\n        this.setState({\n          avatar: response.url,\n          avatarPreviewStyle: { opacity: '1' },\n        });\n\n        Alert.info('Looking good!');\n      },\n\n      afterRead: ({ result }) => {\n        this.setState({ avatarPreviewUrl: result });\n      },\n    });\n  }\n\n  render() {\n    const user = this.props.user;\n    const { avatar, avatarPreviewStyle, avatarPreviewUrl } = this.state;\n\n    return (\n      <Grid>\n        <Row className=\"show-grid\">\n          <Col xs={6} md={4}>\n           <FormGroup>\n              <ControlLabel>Photo</ControlLabel>\n              <div className=\"profileCircleImg\" onMouseOver={this.mouseOver.bind(this)}  onMouseOut={this.mouseOut.bind(this)}>\n                <img alt=\"avatar\" className=\"avatar\" style={avatarPreviewStyle} src={avatarPreviewUrl} />\n              {this.state.hover ? <span className=\"profileSelector\">Upload Image</span> : null}\n              </div>\n              <FormControl type=\"file\" onChange={this.handleImageChange} />\n              <input type=\"hidden\" id=\"avatar\" value={avatar} />\n            </FormGroup>\n          </Col>\n\n          <Col xs={12} md={8}>\n            <FormGroup>\n              <ControlLabel>Name</ControlLabel>\n              <FormControl type=\"text\" id=\"fullName\" defaultValue={user.details.fullName} />\n            </FormGroup>\n\n            <FormGroup>\n              <ControlLabel>Position</ControlLabel>\n              <FormControl type=\"text\" id=\"position\" defaultValue={user.details.position} />\n            </FormGroup>\n\n            <FormGroup>\n              <ControlLabel>Username</ControlLabel>\n              <FormControl type=\"text\" id=\"username\" defaultValue={user.username} />\n            </FormGroup>\n\n            <FormGroup>\n              <ControlLabel>Email</ControlLabel>\n              <FormControl type=\"email\" id=\"email\" defaultValue={user.emails[0].address} />\n            </FormGroup>\n\n            <FormGroup>\n              <ControlLabel>Twitter username</ControlLabel>\n              <FormControl\n                type=\"text\"\n                id=\"twitterUsername\"\n                defaultValue={user.details.twitterUsername}\n              />\n            </FormGroup>\n          </Col>\n        </Row>\n      </Grid>\n    );\n  }\n}\n\nUserCommonInfos.propTypes = propTypes;\n\nexport default UserCommonInfos;\n"]},"hash":"408b30a9951022f88e5b8cb9d9cc3ea51d8d6fae"}
