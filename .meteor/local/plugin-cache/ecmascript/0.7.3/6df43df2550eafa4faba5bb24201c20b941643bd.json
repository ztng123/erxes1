{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","toConsumableArray","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"/imports/react-ui/layout/components","imported":["Wrapper"],"specifiers":[{"kind":"named","imported":"Wrapper","local":"Wrapper"}]},{"source":"/imports/react-ui/common","imported":["EmptyState"],"specifiers":[{"kind":"named","imported":"EmptyState","local":"EmptyState"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/react-ui/engage/components/Segments.js","filenameRelative":"/imports/react-ui/engage/components/Segments.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/react-ui/engage/components/Segments.js.map","sourceFileName":"/imports/react-ui/engage/components/Segments.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"Segments"},"ignored":false,"code":"var _toConsumableArray2 = require(\"babel-runtime/helpers/toConsumableArray\");\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.importSync(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Wrapper = void 0;\nmodule.importSync(\"/imports/react-ui/layout/components\", {\n  Wrapper: function (v) {\n    Wrapper = v;\n  }\n}, 2);\nvar EmptyState = void 0;\nmodule.importSync(\"/imports/react-ui/common\", {\n  EmptyState: function (v) {\n    EmptyState = v;\n  }\n}, 3);\nvar propTypes = {\n  segments: PropTypes.array.isRequired,\n  onChangeSegments: PropTypes.func.isRequired,\n  defaultSegment: PropTypes.string,\n  counts: PropTypes.object\n};\n\nvar Segments = function (_Component) {\n  (0, _inherits3.default)(Segments, _Component);\n\n  function Segments(props) {\n    (0, _classCallCheck3.default)(this, Segments);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    _this.state = {\n      chosenSegment: props.defaultSegment || ''\n    };\n    _this.onClickSegment = _this.onClickSegment.bind(_this);\n    return _this;\n  }\n\n  Segments.prototype.onClickSegment = function () {\n    function onClickSegment(segmentId) {\n      this.props.onChangeSegments(segmentId);\n      this.setState({\n        chosenSegment: segmentId\n      });\n    }\n\n    return onClickSegment;\n  }();\n\n  Segments.prototype.render = function () {\n    function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          segments = _props.segments,\n          counts = _props.counts;\n      var Section = Wrapper.Sidebar.Section;\n      var orderedSegments = [];\n      segments.filter(function (segment) {\n        return !segment.subOf;\n      }).map(function (segment) {\n        orderedSegments.push.apply(orderedSegments, [segment].concat((0, _toConsumableArray3.default)(segment.getSubSegments)));\n      });\n      return React.createElement(\n        Section,\n        {\n          collapsible: segments.length > 5\n        },\n        React.createElement(\n          Section.Title,\n          null,\n          \"Choose segment\"\n        ),\n        React.createElement(\n          \"ul\",\n          {\n            className: \"sidebar-list\"\n          },\n          orderedSegments.length ? orderedSegments.map(function (segment) {\n            return React.createElement(\n              \"li\",\n              {\n                key: segment._id\n              },\n              React.createElement(\n                \"a\",\n                {\n                  tabIndex: 0,\n                  className: _this2.state.chosenSegment == segment._id ? 'chosen' : '',\n                  onClick: function () {\n                    return _this2.onClickSegment(segment._id);\n                  }\n                },\n                segment.subOf ? \"\\xA0\\xA0\\xA0\\xA0\\xA0\" : null,\n                React.createElement(\"i\", {\n                  className: \"ion-pie-graph icon\",\n                  style: {\n                    color: segment.color\n                  }\n                }),\n                segment.name,\n                React.createElement(\n                  \"span\",\n                  {\n                    className: \"counter\"\n                  },\n                  counts[segment._id]\n                )\n              )\n            );\n          }) : React.createElement(EmptyState, {\n            icon: React.createElement(\"i\", {\n              className: \"ion-pie-graph\"\n            }),\n            text: \"No segments\",\n            size: \"small\"\n          })\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return Segments;\n}(Component);\n\nSegments.propTypes = propTypes;\nmodule.export(\"default\", exports.default = Segments);","map":{"version":3,"sources":["/imports/react-ui/engage/components/Segments.js"],"names":["React","Component","module","importSync","v","PropTypes","Wrapper","EmptyState","propTypes","segments","array","isRequired","onChangeSegments","func","defaultSegment","string","counts","object","Segments","props","state","chosenSegment","onClickSegment","bind","segmentId","setState","render","Section","Sidebar","orderedSegments","filter","segment","subOf","map","push","getSubSegments","length","_id","color","name","export","exports","default"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,IAAIA,cAAJ;AAAA,IAAUC,kBAAV;AAAoBC,OAAOC,UAAP,CAAkB,OAAlB,EAA0B;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACJ,YAAMI,CAAN;AAAQ,GAA7B;AAA8BH,aAAU,UAASG,CAAT,EAAW;AAACH,gBAAUG,CAAV;AAAY;AAAhE,CAA1B,EAA4F,CAA5F;AAA+F,IAAIC,kBAAJ;AAAcH,OAAOC,UAAP,CAAkB,YAAlB,EAA+B;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACC,gBAAUD,CAAV;AAAY;AAAjC,CAA/B,EAAkE,CAAlE;AAAqE,IAAIE,gBAAJ;AAAYJ,OAAOC,UAAP,CAAkB,qCAAlB,EAAwD;AAACG,WAAQ,UAASF,CAAT,EAAW;AAACE,cAAQF,CAAR;AAAU;AAA/B,CAAxD,EAAyF,CAAzF;AAA4F,IAAIG,mBAAJ;AAAeL,OAAOC,UAAP,CAAkB,0BAAlB,EAA6C;AAACI,cAAW,UAASH,CAAT,EAAW;AAACG,iBAAWH,CAAX;AAAa;AAArC,CAA7C,EAAoF,CAApF;AAK7T,IAAMI,YAAY;AAChBC,YAAUJ,UAAUK,KAAV,CAAgBC,UADV;AAEhBC,oBAAkBP,UAAUQ,IAAV,CAAeF,UAFjB;AAGhBG,kBAAgBT,UAAUU,MAHV;AAIhBC,UAAQX,UAAUY;AAJF,CAAlB;;IAOMC,Q;;;AACJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA,+DACjB,sBAAMA,KAAN,CADiB;;AAGjB,UAAKC,KAAL,GAAa;AACXC,qBAAeF,MAAML,cAAN,IAAwB;AAD5B,KAAb;AAIA,UAAKQ,cAAL,GAAsB,MAAKA,cAAL,CAAoBC,IAApB,OAAtB;AAPiB;AAQlB;;qBAEDD,c;4BAAeE,S,EAAW;AACxB,WAAKL,KAAL,CAAWP,gBAAX,CAA4BY,SAA5B;AACA,WAAKC,QAAL,CAAc;AAAEJ,uBAAeG;AAAjB,OAAd;AACD;;;;;qBAEDE,M;sBAAS;AAAA;;AAAA,mBACsB,KAAKP,KAD3B;AAAA,UACCV,QADD,UACCA,QADD;AAAA,UACWO,MADX,UACWA,MADX;AAAA,UAECW,OAFD,GAEarB,QAAQsB,OAFrB,CAECD,OAFD;AAGP,UAAME,kBAAkB,EAAxB;AACApB,eAASqB,MAAT,CAAgB;AAAA,eAAW,CAACC,QAAQC,KAApB;AAAA,OAAhB,EAA2CC,GAA3C,CAA+C,mBAAW;AACxDJ,wBAAgBK,IAAhB,yBAAqBH,OAArB,0CAAiCA,QAAQI,cAAzC;AACD,OAFD;AAGA,aACE;AAAC,eAAD;AAAA;AAAS,uBAAa1B,SAAS2B,MAAT,GAAkB;AAAxC;AACE;AAAC,iBAAD,CAAS,KAAT;AAAA;AAAA;AAAA,SADF;AAGE;AAAA;AAAA;AAAI,uBAAU;AAAd;AACGP,0BAAgBO,MAAhB,GACGP,gBAAgBI,GAAhB,CAAoB;AAAA,mBAClB;AAAA;AAAA;AAAI,qBAAKF,QAAQM;AAAjB;AACE;AAAA;AAAA;AACE,4BAAU,CADZ;AAEE,6BAAW,OAAKjB,KAAL,CAAWC,aAAX,IAA4BU,QAAQM,GAApC,GAA0C,QAA1C,GAAqD,EAFlE;AAGE,2BAAS;AAAA,2BAAM,OAAKf,cAAL,CAAoBS,QAAQM,GAA5B,CAAN;AAAA;AAHX;AAKGN,wBAAQC,KAAR,GAAgB,sBAAhB,GAAmD,IALtD;AAME;AAAG,6BAAU,oBAAb;AAAkC,yBAAO;AAAEM,2BAAOP,QAAQO;AAAjB;AAAzC,kBANF;AAOGP,wBAAQQ,IAPX;AAQE;AAAA;AAAA;AAAM,+BAAU;AAAhB;AACGvB,yBAAOe,QAAQM,GAAf;AADH;AARF;AADF,aADkB;AAAA,WAApB,CADH,GAiBG,oBAAC,UAAD;AAAY,kBAAM;AAAG,yBAAU;AAAb,cAAlB;AAAmD,kBAAK,aAAxD;AAAsE,kBAAK;AAA3E;AAlBN;AAHF,OADF;AA0BD;;;;;;EAjDoBpC,S;;AAoDvBiB,SAASV,SAAT,GAAqBA,SAArB;AAhEAN,OAAOsC,MAAP,CAAc,SAAd,EAAwBC,QAAQC,OAAR,GAkETxB,QAlEf","file":"/imports/react-ui/engage/components/Segments.js.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Wrapper } from '/imports/react-ui/layout/components';\nimport { EmptyState } from '/imports/react-ui/common';\n\nconst propTypes = {\n  segments: PropTypes.array.isRequired,\n  onChangeSegments: PropTypes.func.isRequired,\n  defaultSegment: PropTypes.string,\n  counts: PropTypes.object,\n};\n\nclass Segments extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      chosenSegment: props.defaultSegment || '',\n    };\n\n    this.onClickSegment = this.onClickSegment.bind(this);\n  }\n\n  onClickSegment(segmentId) {\n    this.props.onChangeSegments(segmentId);\n    this.setState({ chosenSegment: segmentId });\n  }\n\n  render() {\n    const { segments, counts } = this.props;\n    const { Section } = Wrapper.Sidebar;\n    const orderedSegments = [];\n    segments.filter(segment => !segment.subOf).map(segment => {\n      orderedSegments.push(segment, ...segment.getSubSegments);\n    });\n    return (\n      <Section collapsible={segments.length > 5}>\n        <Section.Title>Choose segment</Section.Title>\n\n        <ul className=\"sidebar-list\">\n          {orderedSegments.length\n            ? orderedSegments.map(segment => (\n                <li key={segment._id}>\n                  <a\n                    tabIndex={0}\n                    className={this.state.chosenSegment == segment._id ? 'chosen' : ''}\n                    onClick={() => this.onClickSegment(segment._id)}\n                  >\n                    {segment.subOf ? '\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0' : null}\n                    <i className=\"ion-pie-graph icon\" style={{ color: segment.color }} />\n                    {segment.name}\n                    <span className=\"counter\">\n                      {counts[segment._id]}\n                    </span>\n                  </a>\n                </li>\n              ))\n            : <EmptyState icon={<i className=\"ion-pie-graph\" />} text=\"No segments\" size=\"small\" />}\n        </ul>\n      </Section>\n    );\n  }\n}\n\nSegments.propTypes = propTypes;\n\nexport default Segments;\n"]},"hash":"6df43df2550eafa4faba5bb24201c20b941643bd"}
