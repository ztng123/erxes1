{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"./uploadHandlerBase","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"uploadHandlerBase"}]}],"exports":{"exported":["uploadHandler","file","afterRead","beforeUpload","afterUpload"],"specifiers":[{"kind":"local","local":"uploadHandler","exported":"default"},{"kind":"local","local":"file","exported":"default"},{"kind":"local","local":"afterRead","exported":"default"},{"kind":"local","local":"beforeUpload","exported":"default"},{"kind":"local","local":"afterUpload","exported":"default"}]}}},"options":{"filename":"/imports/api/client/uploadHandler.js","filenameRelative":"/imports/api/client/uploadHandler.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/api/client/uploadHandler.js.map","sourceFileName":"/imports/api/client/uploadHandler.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"uploadHandler"},"ignored":false,"code":"module.export({\n  \"default\": function () {\n    return uploadHandler;\n  }\n});\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar uploadHandlerBase = void 0;\nmodule.importSync(\"./uploadHandlerBase\", {\n  \"default\": function (v) {\n    uploadHandlerBase = v;\n  }\n}, 1);\n\nfunction uploadHandler(_ref) {\n  var file = _ref.file,\n      afterRead = _ref.afterRead,\n      beforeUpload = _ref.beforeUpload,\n      afterUpload = _ref.afterUpload;\n  uploadHandlerBase({\n    // Blob object\n    file: file,\n    // for preview purpose\n    afterRead: afterRead,\n    // main upload action\n    uploadAction: function (_ref2) {\n      var data = _ref2.data,\n          fileInfo = _ref2.fileInfo;\n\n      // before upload\n      if (beforeUpload) {\n        beforeUpload();\n      }\n\n      Meteor.call('uploadFile', {\n        name: file.name,\n        data: data\n      }, function (err, response) {\n        if (err) {\n          throw new Error(err);\n        } // after upload\n\n\n        if (afterUpload) {\n          afterUpload({\n            response: response,\n            fileInfo: fileInfo\n          });\n        }\n      });\n    }\n  });\n}","map":{"version":3,"sources":["/imports/api/client/uploadHandler.js"],"names":["module","export","uploadHandler","Meteor","importSync","v","uploadHandlerBase","file","afterRead","beforeUpload","afterUpload","uploadAction","data","fileInfo","call","name","err","response","Error"],"mappings":"AAAAA,OAAOC,MAAP,CAAc;AAAC,aAAQ;AAAA,WAAIC,aAAJ;AAAA;AAAT,CAAd;AAA2C,IAAIC,eAAJ;AAAWH,OAAOI,UAAP,CAAkB,eAAlB,EAAkC;AAACD,UAAO,UAASE,CAAT,EAAW;AAACF,aAAOE,CAAP;AAAS;AAA7B,CAAlC,EAAiE,CAAjE;AAAoE,IAAIC,0BAAJ;AAAsBN,OAAOI,UAAP,CAAkB,qBAAlB,EAAwC;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACC,wBAAkBD,CAAlB;AAAoB;AAAzC,CAAxC,EAAmF,CAAnF;;AAGjI,SAASH,aAAT,OAAuE;AAAA,MAA9CK,IAA8C,QAA9CA,IAA8C;AAAA,MAAxCC,SAAwC,QAAxCA,SAAwC;AAAA,MAA7BC,YAA6B,QAA7BA,YAA6B;AAAA,MAAfC,WAAe,QAAfA,WAAe;AACpFJ,oBAAkB;AAChB;AACAC,cAFgB;AAIhB;AACAC,wBALgB;AAOhB;AACAG,kBAAc,iBAAwB;AAAA,UAArBC,IAAqB,SAArBA,IAAqB;AAAA,UAAfC,QAAe,SAAfA,QAAe;;AACpC;AACA,UAAIJ,YAAJ,EAAkB;AAChBA;AACD;;AAEDN,aAAOW,IAAP,CAAY,YAAZ,EAA0B;AAAEC,cAAMR,KAAKQ,IAAb;AAAmBH;AAAnB,OAA1B,EAAqD,UAACI,GAAD,EAAMC,QAAN,EAAmB;AACtE,YAAID,GAAJ,EAAS;AACP,gBAAM,IAAIE,KAAJ,CAAUF,GAAV,CAAN;AACD,SAHqE,CAKtE;;;AACA,YAAIN,WAAJ,EAAiB;AACfA,sBAAY;AAAEO,8BAAF;AAAYJ;AAAZ,WAAZ;AACD;AACF,OATD;AAUD;AAxBe,GAAlB;AA0BD","file":"/imports/api/client/uploadHandler.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport uploadHandlerBase from './uploadHandlerBase';\n\nexport default function uploadHandler({ file, afterRead, beforeUpload, afterUpload }) {\n  uploadHandlerBase({\n    // Blob object\n    file,\n\n    // for preview purpose\n    afterRead,\n\n    // main upload action\n    uploadAction: ({ data, fileInfo }) => {\n      // before upload\n      if (beforeUpload) {\n        beforeUpload();\n      }\n\n      Meteor.call('uploadFile', { name: file.name, data }, (err, response) => {\n        if (err) {\n          throw new Error(err);\n        }\n\n        // after upload\n        if (afterUpload) {\n          afterUpload({ response, fileInfo });\n        }\n      });\n    },\n  });\n}\n"]},"hash":"f8413397de09916271159f351b5f82df20032b81"}
