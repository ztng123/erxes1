{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/check","imported":["Match","check"],"specifiers":[{"kind":"named","imported":"Match","local":"Match"},{"kind":"named","imported":"check","local":"check"}]},{"source":"meteor/tmeasday:publish-counts","imported":["Counts"],"specifiers":[{"kind":"named","imported":"Counts","local":"Counts"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/api/users/server/publications.js","filenameRelative":"/imports/api/users/server/publications.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/api/users/server/publications.js.map","sourceFileName":"/imports/api/users/server/publications.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"publications"},"ignored":false,"code":"var Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar Match = void 0,\n    check = void 0;\nmodule.importSync(\"meteor/check\", {\n  Match: function (v) {\n    Match = v;\n  },\n  check: function (v) {\n    check = v;\n  }\n}, 1);\nvar Counts = void 0;\nmodule.importSync(\"meteor/tmeasday:publish-counts\", {\n  Counts: function (v) {\n    Counts = v;\n  }\n}, 2);\nvar publicFields = {\n  isOwner: 1,\n  username: 1,\n  details: 1,\n  emailSignatures: 1,\n  emails: 1,\n  configs: 1\n};\nMeteor.publish(null, function () {\n  function loggedInUserFields() {\n    if (!this.userId) {\n      return this.ready();\n    }\n\n    return Meteor.users.find(this.userId, {\n      fields: publicFields\n    });\n  }\n\n  return loggedInUserFields;\n}());\nMeteor.publish('users.list', function () {\n  function usersList(params) {\n    check(params, {\n      ids: Match.Optional([String]),\n      limit: Match.Optional(Number)\n    });\n\n    if (!this.userId) {\n      return this.ready();\n    }\n\n    Counts.publish(this, 'users.list.count', Meteor.users.find(), {\n      noReady: true\n    });\n    return Meteor.users.find({}, {\n      fields: publicFields,\n      limit: params.limit\n    });\n  }\n\n  return usersList;\n}());","map":{"version":3,"sources":["/imports/api/users/server/publications.js"],"names":["Meteor","module","importSync","v","Match","check","Counts","publicFields","isOwner","username","details","emailSignatures","emails","configs","publish","loggedInUserFields","userId","ready","users","find","fields","usersList","params","ids","Optional","String","limit","Number","noReady"],"mappings":"AAAA,IAAIA,eAAJ;AAAWC,OAAOC,UAAP,CAAkB,eAAlB,EAAkC;AAACF,UAAO,UAASG,CAAT,EAAW;AAACH,aAAOG,CAAP;AAAS;AAA7B,CAAlC,EAAiE,CAAjE;AAAoE,IAAIC,cAAJ;AAAA,IAAUC,cAAV;AAAgBJ,OAAOC,UAAP,CAAkB,cAAlB,EAAiC;AAACE,SAAM,UAASD,CAAT,EAAW;AAACC,YAAMD,CAAN;AAAQ,GAA3B;AAA4BE,SAAM,UAASF,CAAT,EAAW;AAACE,YAAMF,CAAN;AAAQ;AAAtD,CAAjC,EAAyF,CAAzF;AAA4F,IAAIG,eAAJ;AAAWL,OAAOC,UAAP,CAAkB,gCAAlB,EAAmD;AAACI,UAAO,UAASH,CAAT,EAAW;AAACG,aAAOH,CAAP;AAAS;AAA7B,CAAnD,EAAkF,CAAlF;AAItM,IAAMI,eAAe;AACnBC,WAAS,CADU;AAEnBC,YAAU,CAFS;AAGnBC,WAAS,CAHU;AAInBC,mBAAiB,CAJE;AAKnBC,UAAQ,CALW;AAMnBC,WAAS;AANU,CAArB;AASAb,OAAOc,OAAP,CAAe,IAAf;AAAqB,WAASC,kBAAT,GAA8B;AACjD,QAAI,CAAC,KAAKC,MAAV,EAAkB;AAChB,aAAO,KAAKC,KAAL,EAAP;AACD;;AAED,WAAOjB,OAAOkB,KAAP,CAAaC,IAAb,CAAkB,KAAKH,MAAvB,EAA+B;AAAEI,cAAQb;AAAV,KAA/B,CAAP;AACD;;AAND,SAA8BQ,kBAA9B;AAAA;AAQAf,OAAOc,OAAP,CAAe,YAAf;AAA6B,WAASO,SAAT,CAAmBC,MAAnB,EAA2B;AACtDjB,UAAMiB,MAAN,EAAc;AACZC,WAAKnB,MAAMoB,QAAN,CAAe,CAACC,MAAD,CAAf,CADO;AAEZC,aAAOtB,MAAMoB,QAAN,CAAeG,MAAf;AAFK,KAAd;;AAKA,QAAI,CAAC,KAAKX,MAAV,EAAkB;AAChB,aAAO,KAAKC,KAAL,EAAP;AACD;;AAEDX,WAAOQ,OAAP,CAAe,IAAf,EAAqB,kBAArB,EAAyCd,OAAOkB,KAAP,CAAaC,IAAb,EAAzC,EAA8D;AAC5DS,eAAS;AADmD,KAA9D;AAIA,WAAO5B,OAAOkB,KAAP,CAAaC,IAAb,CAAkB,EAAlB,EAAsB;AAAEC,cAAQb,YAAV;AAAwBmB,aAAOJ,OAAOI;AAAtC,KAAtB,CAAP;AACD;;AAfD,SAAsCL,SAAtC;AAAA","file":"/imports/api/users/server/publications.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Match, check } from 'meteor/check';\nimport { Counts } from 'meteor/tmeasday:publish-counts';\n\nconst publicFields = {\n  isOwner: 1,\n  username: 1,\n  details: 1,\n  emailSignatures: 1,\n  emails: 1,\n  configs: 1,\n};\n\nMeteor.publish(null, function loggedInUserFields() {\n  if (!this.userId) {\n    return this.ready();\n  }\n\n  return Meteor.users.find(this.userId, { fields: publicFields });\n});\n\nMeteor.publish('users.list', function usersList(params) {\n  check(params, {\n    ids: Match.Optional([String]),\n    limit: Match.Optional(Number),\n  });\n\n  if (!this.userId) {\n    return this.ready();\n  }\n\n  Counts.publish(this, 'users.list.count', Meteor.users.find(), {\n    noReady: true,\n  });\n\n  return Meteor.users.find({}, { fields: publicFields, limit: params.limit });\n});\n"]},"hash":"de43c8fb4a3fcd49d2cce2083dd175a49d88d156"}
