{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react-sortable-hoc","imported":["SortableContainer","SortableElement","SortableHandle","arrayMove"],"specifiers":[{"kind":"named","imported":"SortableContainer","local":"SortableContainer"},{"kind":"named","imported":"SortableElement","local":"SortableElement"},{"kind":"named","imported":"SortableHandle","local":"SortableHandle"},{"kind":"named","imported":"arrayMove","local":"arrayMove"}]},{"source":"/imports/react-ui/common","imported":["EmptyState"],"specifiers":[{"kind":"named","imported":"EmptyState","local":"EmptyState"}]},{"source":"./FieldPreview","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"FieldPreview"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/react-ui/settings/forms/components/FieldsPreview.js","filenameRelative":"/imports/react-ui/settings/forms/components/FieldsPreview.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/react-ui/settings/forms/components/FieldsPreview.js.map","sourceFileName":"/imports/react-ui/settings/forms/components/FieldsPreview.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"FieldsPreview"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.importSync(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar SortableContainer = void 0,\n    SortableElement = void 0,\n    SortableHandle = void 0,\n    arrayMove = void 0;\nmodule.importSync(\"react-sortable-hoc\", {\n  SortableContainer: function (v) {\n    SortableContainer = v;\n  },\n  SortableElement: function (v) {\n    SortableElement = v;\n  },\n  SortableHandle: function (v) {\n    SortableHandle = v;\n  },\n  arrayMove: function (v) {\n    arrayMove = v;\n  }\n}, 2);\nvar EmptyState = void 0;\nmodule.importSync(\"/imports/react-ui/common\", {\n  EmptyState: function (v) {\n    EmptyState = v;\n  }\n}, 3);\nvar FieldPreview = void 0;\nmodule.importSync(\"./FieldPreview\", {\n  \"default\": function (v) {\n    FieldPreview = v;\n  }\n}, 4);\nvar DragHandle = SortableHandle(function () {\n  return React.createElement(\n    \"span\",\n    {\n      className: \"drag-handler\"\n    },\n    \"::::\"\n  );\n});\n\nvar FieldPreviewWrapper = function (props) {\n  return React.createElement(\n    \"div\",\n    {\n      className: \"draggable-field\"\n    },\n    React.createElement(DragHandle, null),\n    React.createElement(FieldPreview, props)\n  );\n};\n\nvar SortableItem = SortableElement(FieldPreviewWrapper);\nvar SortableList = SortableContainer(function (_ref) {\n  var fields = _ref.fields,\n      onEdit = _ref.onEdit;\n  return React.createElement(\n    \"div\",\n    {\n      className: \"form-preview\"\n    },\n    fields.map(function (field, index) {\n      return React.createElement(SortableItem, {\n        key: \"item-\" + index,\n        index: index,\n        field: field,\n        onEdit: onEdit\n      });\n    }),\n    fields.length == 0 ? React.createElement(EmptyState, {\n      icon: React.createElement(\"i\", {\n        className: \"ion-clipboard\"\n      }),\n      text: \"No items\",\n      size: \"small\"\n    }) : null\n  );\n});\n\nvar FieldsPreview = function (_Component) {\n  (0, _inherits3.default)(FieldsPreview, _Component);\n\n  function FieldsPreview(props) {\n    (0, _classCallCheck3.default)(this, FieldsPreview);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    _this.onSortEnd = _this.onSortEnd.bind(_this);\n    _this.state = {\n      fields: props.fields\n    };\n    return _this;\n  }\n\n  FieldsPreview.prototype.componentWillUpdate = function () {\n    function componentWillUpdate(nextProps) {\n      if (this.state.fields.length !== nextProps.fields.length) {\n        this.setState({\n          fields: nextProps.fields\n        });\n      }\n    }\n\n    return componentWillUpdate;\n  }();\n\n  FieldsPreview.prototype.onSortEnd = function () {\n    function onSortEnd(_ref2) {\n      var oldIndex = _ref2.oldIndex,\n          newIndex = _ref2.newIndex;\n      var reorderedFields = arrayMove(this.state.fields, oldIndex, newIndex);\n      this.setState({\n        fields: reorderedFields\n      });\n      this.props.onSort(reorderedFields);\n    }\n\n    return onSortEnd;\n  }();\n\n  FieldsPreview.prototype.render = function () {\n    function render() {\n      return React.createElement(SortableList, {\n        fields: this.state.fields,\n        onEdit: this.props.onFieldEdit,\n        onSortEnd: this.onSortEnd,\n        useDragHandle: true\n      });\n    }\n\n    return render;\n  }();\n\n  return FieldsPreview;\n}(Component);\n\nFieldsPreview.propTypes = {\n  fields: PropTypes.array.isRequired,\n  // eslint-disable-line\n  onFieldEdit: PropTypes.func.isRequired,\n  onSort: PropTypes.func.isRequired\n};\nmodule.export(\"default\", exports.default = FieldsPreview);","map":{"version":3,"sources":["/imports/react-ui/settings/forms/components/FieldsPreview.js"],"names":["React","Component","module","importSync","v","PropTypes","SortableContainer","SortableElement","SortableHandle","arrayMove","EmptyState","FieldPreview","DragHandle","FieldPreviewWrapper","props","SortableItem","SortableList","fields","onEdit","map","field","index","length","FieldsPreview","onSortEnd","bind","state","componentWillUpdate","nextProps","setState","oldIndex","newIndex","reorderedFields","onSort","render","onFieldEdit","propTypes","array","isRequired","func","export","exports","default"],"mappings":"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","file":"/imports/react-ui/settings/forms/components/FieldsPreview.js.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { SortableContainer, SortableElement, SortableHandle, arrayMove } from 'react-sortable-hoc';\nimport { EmptyState } from '/imports/react-ui/common';\nimport FieldPreview from './FieldPreview';\n\nconst DragHandle = SortableHandle(() => <span className=\"drag-handler\">::::</span>);\n\nconst FieldPreviewWrapper = props => (\n  <div className=\"draggable-field\">\n    <DragHandle />\n    <FieldPreview {...props} />\n  </div>\n);\n\nconst SortableItem = SortableElement(FieldPreviewWrapper);\n\nconst SortableList = SortableContainer(({ fields, onEdit }) => (\n  <div className=\"form-preview\">\n    {fields.map((field, index) => (\n      <SortableItem key={`item-${index}`} index={index} field={field} onEdit={onEdit} />\n    ))}\n\n    {fields.length == 0\n      ? <EmptyState icon={<i className=\"ion-clipboard\" />} text=\"No items\" size=\"small\" />\n      : null}\n  </div>\n));\n\nclass FieldsPreview extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSortEnd = this.onSortEnd.bind(this);\n\n    this.state = {\n      fields: props.fields,\n    };\n  }\n\n  componentWillUpdate(nextProps) {\n    if (this.state.fields.length !== nextProps.fields.length) {\n      this.setState({\n        fields: nextProps.fields,\n      });\n    }\n  }\n\n  onSortEnd({ oldIndex, newIndex }) {\n    const reorderedFields = arrayMove(this.state.fields, oldIndex, newIndex);\n\n    this.setState({\n      fields: reorderedFields,\n    });\n\n    this.props.onSort(reorderedFields);\n  }\n\n  render() {\n    return (\n      <SortableList\n        fields={this.state.fields}\n        onEdit={this.props.onFieldEdit}\n        onSortEnd={this.onSortEnd}\n        useDragHandle\n      />\n    );\n  }\n}\n\nFieldsPreview.propTypes = {\n  fields: PropTypes.array.isRequired, // eslint-disable-line\n  onFieldEdit: PropTypes.func.isRequired,\n  onSort: PropTypes.func.isRequired,\n};\n\nexport default FieldsPreview;\n"]},"hash":"cedd106ed614479dc2f45d15790fc1d06af498ee"}
