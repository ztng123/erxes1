{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react-bootstrap","imported":["FormGroup","ControlLabel","FormControl","Col","Grid","Row"],"specifiers":[{"kind":"named","imported":"FormGroup","local":"FormGroup"},{"kind":"named","imported":"ControlLabel","local":"ControlLabel"},{"kind":"named","imported":"FormControl","local":"FormControl"},{"kind":"named","imported":"Col","local":"Col"},{"kind":"named","imported":"Grid","local":"Grid"},{"kind":"named","imported":"Row","local":"Row"}]},{"source":"meteor/erxes-notifier","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Alert"}]},{"source":"/imports/api/client/uploadHandler","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"uploadHandler"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/react-ui/auth/components/UserCommonInfos.js","filenameRelative":"/imports/react-ui/auth/components/UserCommonInfos.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/react-ui/auth/components/UserCommonInfos.js.map","sourceFileName":"/imports/react-ui/auth/components/UserCommonInfos.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"UserCommonInfos"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.importSync(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar FormGroup = void 0,\n    ControlLabel = void 0,\n    FormControl = void 0,\n    Col = void 0,\n    Grid = void 0,\n    Row = void 0;\nmodule.importSync(\"react-bootstrap\", {\n  FormGroup: function (v) {\n    FormGroup = v;\n  },\n  ControlLabel: function (v) {\n    ControlLabel = v;\n  },\n  FormControl: function (v) {\n    FormControl = v;\n  },\n  Col: function (v) {\n    Col = v;\n  },\n  Grid: function (v) {\n    Grid = v;\n  },\n  Row: function (v) {\n    Row = v;\n  }\n}, 2);\nvar Alert = void 0;\nmodule.importSync(\"meteor/erxes-notifier\", {\n  \"default\": function (v) {\n    Alert = v;\n  }\n}, 3);\nvar uploadHandler = void 0;\nmodule.importSync(\"/imports/api/client/uploadHandler\", {\n  \"default\": function (v) {\n    uploadHandler = v;\n  }\n}, 4);\nvar propTypes = {\n  user: PropTypes.object.isRequired\n};\n\nvar UserCommonInfos = function (_Component) {\n  (0, _inherits3.default)(UserCommonInfos, _Component);\n\n  function UserCommonInfos(props) {\n    (0, _classCallCheck3.default)(this, UserCommonInfos);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    var defaultAvatar = '/images/userDefaultIcon.png';\n    _this.state = {\n      avatar: _this.props.user.details.avatar,\n      avatarPreviewUrl: _this.props.user.details.avatar || defaultAvatar,\n      avatarPreviewStyle: {}\n    };\n    _this.handleImageChange = _this.handleImageChange.bind(_this);\n    return _this;\n  }\n\n  UserCommonInfos.prototype.handleImageChange = function () {\n    function handleImageChange(e) {\n      var _this2 = this;\n\n      var imageFile = e.target.files[0];\n      uploadHandler({\n        file: imageFile,\n        beforeUpload: function () {\n          _this2.setState({\n            avatarPreviewStyle: {\n              opacity: '0.2'\n            }\n          });\n        },\n        afterUpload: function (_ref) {\n          var response = _ref.response;\n\n          _this2.setState({\n            avatar: response.url,\n            avatarPreviewStyle: {\n              opacity: '1'\n            }\n          });\n\n          Alert.info('Looking good!');\n        },\n        afterRead: function (_ref2) {\n          var result = _ref2.result;\n\n          _this2.setState({\n            avatarPreviewUrl: result\n          });\n        }\n      });\n    }\n\n    return handleImageChange;\n  }();\n\n  UserCommonInfos.prototype.render = function () {\n    function render() {\n      var user = this.props.user;\n      var _state = this.state,\n          avatar = _state.avatar,\n          avatarPreviewStyle = _state.avatarPreviewStyle,\n          avatarPreviewUrl = _state.avatarPreviewUrl;\n      return React.createElement(\n        Grid,\n        null,\n        React.createElement(\n          Row,\n          {\n            className: \"show-grid\"\n          },\n          React.createElement(\n            Col,\n            {\n              md: 6,\n              mdPush: 6\n            },\n            React.createElement(\n              \"code\",\n              null,\n              \"<\",\n              'Col md={6} mdPush={6}',\n              \" />\"\n            )\n          ),\n          React.createElement(\n            Col,\n            {\n              md: 6,\n              mdPull: 6\n            },\n            React.createElement(\n              \"code\",\n              null,\n              \"<\",\n              'Col md={6} mdPull={6}',\n              \" />\"\n            )\n          )\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return UserCommonInfos;\n}(Component);\n\nUserCommonInfos.propTypes = propTypes;\nmodule.export(\"default\", exports.default = UserCommonInfos);","map":{"version":3,"sources":["/imports/react-ui/auth/components/UserCommonInfos.js"],"names":["React","Component","module","importSync","v","PropTypes","FormGroup","ControlLabel","FormControl","Col","Grid","Row","Alert","uploadHandler","propTypes","user","object","isRequired","UserCommonInfos","props","defaultAvatar","state","avatar","details","avatarPreviewUrl","avatarPreviewStyle","handleImageChange","bind","e","imageFile","target","files","file","beforeUpload","setState","opacity","afterUpload","response","url","info","afterRead","result","render","export","exports","default"],"mappings":"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","file":"/imports/react-ui/auth/components/UserCommonInfos.js.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { FormGroup, ControlLabel, FormControl, Col, Grid, Row } from 'react-bootstrap';\nimport Alert from 'meteor/erxes-notifier';\nimport uploadHandler from '/imports/api/client/uploadHandler';\n\nconst propTypes = {\n  user: PropTypes.object.isRequired,\n};\n\nclass UserCommonInfos extends Component {\n  constructor(props) {\n    super(props);\n\n    const defaultAvatar = '/images/userDefaultIcon.png';\n\n    this.state = {\n      avatar: this.props.user.details.avatar,\n      avatarPreviewUrl: this.props.user.details.avatar || defaultAvatar,\n      avatarPreviewStyle: {},\n    };\n\n    this.handleImageChange = this.handleImageChange.bind(this);\n  }\n\n  handleImageChange(e) {\n    const imageFile = e.target.files[0];\n\n    uploadHandler({\n      file: imageFile,\n\n      beforeUpload: () => {\n        this.setState({ avatarPreviewStyle: { opacity: '0.2' } });\n      },\n\n      afterUpload: ({ response }) => {\n        this.setState({\n          avatar: response.url,\n          avatarPreviewStyle: { opacity: '1' },\n        });\n\n        Alert.info('Looking good!');\n      },\n\n      afterRead: ({ result }) => {\n        this.setState({ avatarPreviewUrl: result });\n      },\n    });\n  }\n\n  render() {\n    const user = this.props.user;\n    const { avatar, avatarPreviewStyle, avatarPreviewUrl } = this.state;\n\n    return (\n      <Grid>\n        <Row className=\"show-grid\">\n        <Col md={6} mdPush={6}><code>&lt;{'Col md={6} mdPush={6}'} /&gt;</code></Col>\n      <Col md={6} mdPull={6}><code>&lt;{'Col md={6} mdPull={6}'} /&gt;</code></Col>\n      </Row>\n  </Grid>\n    );\n  }\n}\n\nUserCommonInfos.propTypes = propTypes;\n\nexport default UserCommonInfos;\n"]},"hash":"03a25acb0852a6f32a3f6035c08433444093c7e0"}
