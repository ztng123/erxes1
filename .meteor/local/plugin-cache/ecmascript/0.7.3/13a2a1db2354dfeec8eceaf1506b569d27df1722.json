{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react-bootstrap","imported":["Button","FormGroup","ControlLabel","FormControl","ButtonToolbar","HelpBlock","Modal"],"specifiers":[{"kind":"named","imported":"Button","local":"Button"},{"kind":"named","imported":"FormGroup","local":"FormGroup"},{"kind":"named","imported":"ControlLabel","local":"ControlLabel"},{"kind":"named","imported":"FormControl","local":"FormControl"},{"kind":"named","imported":"ButtonToolbar","local":"ButtonToolbar"},{"kind":"named","imported":"HelpBlock","local":"HelpBlock"},{"kind":"named","imported":"Modal","local":"Modal"}]},{"source":"meteor/erxes-notifier","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Alert"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/react-ui/settings/email/components/Config.js","filenameRelative":"/imports/react-ui/settings/email/components/Config.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/react-ui/settings/email/components/Config.js.map","sourceFileName":"/imports/react-ui/settings/email/components/Config.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"Config"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.importSync(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Button = void 0,\n    FormGroup = void 0,\n    ControlLabel = void 0,\n    FormControl = void 0,\n    ButtonToolbar = void 0,\n    HelpBlock = void 0,\n    Modal = void 0;\nmodule.importSync(\"react-bootstrap\", {\n  Button: function (v) {\n    Button = v;\n  },\n  FormGroup: function (v) {\n    FormGroup = v;\n  },\n  ControlLabel: function (v) {\n    ControlLabel = v;\n  },\n  FormControl: function (v) {\n    FormControl = v;\n  },\n  ButtonToolbar: function (v) {\n    ButtonToolbar = v;\n  },\n  HelpBlock: function (v) {\n    HelpBlock = v;\n  },\n  Modal: function (v) {\n    Modal = v;\n  }\n}, 2);\nvar Alert = void 0;\nmodule.importSync(\"meteor/erxes-notifier\", {\n  \"default\": function (v) {\n    Alert = v;\n  }\n}, 3);\nvar propTypes = {\n  brand: PropTypes.object.isRequired,\n  configEmail: PropTypes.func.isRequired,\n  defaultTemplate: PropTypes.string.isRequired\n};\nvar contextTypes = {\n  closeModal: PropTypes.func.isRequired\n};\n\nvar Config = function (_Component) {\n  (0, _inherits3.default)(Config, _Component);\n\n  function Config(props) {\n    (0, _classCallCheck3.default)(this, Config);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    var _ref = props.brand.emailConfig || {\n      type: 'simple',\n      template: ''\n    },\n        type = _ref.type,\n        template = _ref.template;\n\n    _this.state = {\n      type: type,\n      template: template || props.defaultTemplate\n    };\n    _this.configureEmail = _this.configureEmail.bind(_this);\n    _this.handleTypeChange = _this.handleTypeChange.bind(_this);\n    _this.handleTemplateChange = _this.handleTemplateChange.bind(_this);\n    return _this;\n  }\n\n  Config.prototype.configureEmail = function () {\n    function configureEmail(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var _props = this.props,\n          brand = _props.brand,\n          configEmail = _props.configEmail;\n      var _state = this.state,\n          type = _state.type,\n          template = _state.template;\n      configEmail({\n        id: brand._id,\n        config: {\n          type: type,\n          template: template\n        }\n      }, function (error) {\n        if (error) {\n          return Alert.error('Error', error.reason);\n        }\n\n        Alert.success('Success', 'Email configuration is successfully saved.');\n        return _this2.context.closeModal();\n      });\n    }\n\n    return configureEmail;\n  }();\n\n  Config.prototype.handleTypeChange = function () {\n    function handleTypeChange(e) {\n      this.setState({\n        type: e.target.value\n      });\n    }\n\n    return handleTypeChange;\n  }();\n\n  Config.prototype.handleTemplateChange = function () {\n    function handleTemplateChange(e) {\n      this.setState({\n        template: e.target.value\n      });\n    }\n\n    return handleTemplateChange;\n  }();\n\n  Config.prototype.render = function () {\n    function render() {\n      var _this3 = this;\n\n      var onClick = function () {\n        _this3.context.closeModal();\n      };\n\n      var _state2 = this.state,\n          type = _state2.type,\n          template = _state2.template;\n      var templateControl = React.createElement(\n        FormGroup,\n        null,\n        React.createElement(\n          ControlLabel,\n          null,\n          \"Template markup\"\n        ),\n        React.createElement(FormControl, {\n          componentClass: \"textarea\",\n          value: template,\n          rows: 20,\n          onChange: this.handleTemplateChange\n        }),\n        React.createElement(\n          HelpBlock,\n          null,\n          \"Use html template here\"\n        )\n      );\n      return React.createElement(\n        \"div\",\n        {\n          className: \"margined\"\n        },\n        React.createElement(\n          \"form\",\n          {\n            id: \"configure-email-form\",\n            onSubmit: this.configureEmail\n          },\n          React.createElement(\n            FormGroup,\n            null,\n            React.createElement(\n              ControlLabel,\n              null,\n              \"Choose your email template type\"\n            ),\n            React.createElement(\n              FormControl,\n              {\n                componentClass: \"select\",\n                placeholder: \"select\",\n                onChange: this.handleTypeChange,\n                value: type\n              },\n              React.createElement(\n                \"option\",\n                {\n                  value: \"simple\"\n                },\n                \"Simple\"\n              ),\n              React.createElement(\n                \"option\",\n                {\n                  value: \"custom\"\n                },\n                \"Custom\"\n              )\n            )\n          ),\n          this.state.type === 'custom' ? templateControl : false,\n          React.createElement(\n            Modal.Footer,\n            null,\n            React.createElement(\n              ButtonToolbar,\n              {\n                className: \"pull-right\"\n              },\n              React.createElement(\n                Button,\n                {\n                  bsStyle: \"link\",\n                  onClick: onClick\n                },\n                \"Cancel\"\n              ),\n              React.createElement(\n                Button,\n                {\n                  type: \"submit\",\n                  bsStyle: \"primary\"\n                },\n                \"Save\"\n              )\n            )\n          )\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return Config;\n}(Component);\n\nConfig.propTypes = propTypes;\nConfig.contextTypes = contextTypes;\nmodule.export(\"default\", exports.default = Config);","map":{"version":3,"sources":["/imports/react-ui/settings/email/components/Config.js"],"names":["React","Component","module","importSync","v","PropTypes","Button","FormGroup","ControlLabel","FormControl","ButtonToolbar","HelpBlock","Modal","Alert","propTypes","brand","object","isRequired","configEmail","func","defaultTemplate","string","contextTypes","closeModal","Config","props","emailConfig","type","template","state","configureEmail","bind","handleTypeChange","handleTemplateChange","e","preventDefault","id","_id","config","error","reason","success","context","setState","target","value","render","onClick","templateControl","export","exports","default"],"mappings":"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","file":"/imports/react-ui/settings/email/components/Config.js.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Button,\n  FormGroup,\n  ControlLabel,\n  FormControl,\n  ButtonToolbar,\n  HelpBlock,\n  Modal,\n} from 'react-bootstrap';\nimport Alert from 'meteor/erxes-notifier';\n\nconst propTypes = {\n  brand: PropTypes.object.isRequired,\n  configEmail: PropTypes.func.isRequired,\n  defaultTemplate: PropTypes.string.isRequired,\n};\n\nconst contextTypes = {\n  closeModal: PropTypes.func.isRequired,\n};\n\nclass Config extends Component {\n  constructor(props) {\n    super(props);\n\n    const { type, template } = props.brand.emailConfig || {\n      type: 'simple',\n      template: '',\n    };\n\n    this.state = { type, template: template || props.defaultTemplate };\n\n    this.configureEmail = this.configureEmail.bind(this);\n    this.handleTypeChange = this.handleTypeChange.bind(this);\n    this.handleTemplateChange = this.handleTemplateChange.bind(this);\n  }\n\n  configureEmail(e) {\n    e.preventDefault();\n\n    const { brand, configEmail } = this.props;\n    const { type, template } = this.state;\n\n    configEmail({ id: brand._id, config: { type, template } }, error => {\n      if (error) {\n        return Alert.error('Error', error.reason);\n      }\n\n      Alert.success('Success', 'Email configuration is successfully saved.');\n      return this.context.closeModal();\n    });\n  }\n\n  handleTypeChange(e) {\n    this.setState({ type: e.target.value });\n  }\n\n  handleTemplateChange(e) {\n    this.setState({ template: e.target.value });\n  }\n\n  render() {\n    const onClick = () => {\n      this.context.closeModal();\n    };\n\n    const { type, template } = this.state;\n\n    const templateControl = (\n      <FormGroup>\n        <ControlLabel>Template markup</ControlLabel>\n        <FormControl\n          componentClass=\"textarea\"\n          value={template}\n          rows={20}\n          onChange={this.handleTemplateChange}\n        />\n        <HelpBlock>Use html template here</HelpBlock>\n      </FormGroup>\n    );\n\n    return (\n      <div className=\"margined\">\n        <form id=\"configure-email-form\" onSubmit={this.configureEmail}>\n          <FormGroup>\n            <ControlLabel>Choose your email template type</ControlLabel>\n            <FormControl\n              componentClass=\"select\"\n              placeholder=\"select\"\n              onChange={this.handleTypeChange}\n              value={type}\n            >\n              <option value=\"simple\">Simple</option>\n              <option value=\"custom\">Custom</option>\n            </FormControl>\n          </FormGroup>\n\n          {this.state.type === 'custom' ? templateControl : false}\n\n          <Modal.Footer>\n            <ButtonToolbar className=\"pull-right\">\n              <Button bsStyle=\"link\" onClick={onClick}>Cancel</Button>\n              <Button type=\"submit\" bsStyle=\"primary\">Save</Button>\n            </ButtonToolbar>\n          </Modal.Footer>\n        </form>\n      </div>\n    );\n  }\n}\n\nConfig.propTypes = propTypes;\nConfig.contextTypes = contextTypes;\n\nexport default Config;\n"]},"hash":"13a2a1db2354dfeec8eceaf1506b569d27df1722"}
