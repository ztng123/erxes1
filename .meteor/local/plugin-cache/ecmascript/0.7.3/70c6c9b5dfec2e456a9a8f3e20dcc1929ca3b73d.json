{"metadata":{"usedHelpers":["extends","taggedTemplateLiteralLoose","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"React"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react-apollo","imported":["compose","gql","graphql"],"specifiers":[{"kind":"named","imported":"compose","local":"compose"},{"kind":"named","imported":"gql","local":"gql"},{"kind":"named","imported":"graphql","local":"graphql"}]},{"source":"../components","imported":["Config"],"specifiers":[{"kind":"named","imported":"Config","local":"Config"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/react-ui/settings/email/containers/Config.js","filenameRelative":"/imports/react-ui/settings/email/containers/Config.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/react-ui/settings/email/containers/Config.js.map","sourceFileName":"/imports/react-ui/settings/email/containers/Config.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"Config"},"ignored":false,"code":"var _taggedTemplateLiteralLoose2 = require(\"babel-runtime/helpers/taggedTemplateLiteralLoose\");\n\nvar _taggedTemplateLiteralLoose3 = _interopRequireDefault(_taggedTemplateLiteralLoose2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _templateObject = (0, _taggedTemplateLiteralLoose3.default)([\"\\n      query brandDetail($brandId: String!) {\\n        brandDetail(_id: $brandId) {\\n          _id\\n          name\\n          emailConfig\\n        }\\n      }\\n    \"], [\"\\n      query brandDetail($brandId: String!) {\\n        brandDetail(_id: $brandId) {\\n          _id\\n          name\\n          emailConfig\\n        }\\n      }\\n    \"]);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar React = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 1);\nvar PropTypes = void 0;\nmodule.importSync(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar compose = void 0,\n    gql = void 0,\n    graphql = void 0;\nmodule.importSync(\"react-apollo\", {\n  compose: function (v) {\n    compose = v;\n  },\n  gql: function (v) {\n    gql = v;\n  },\n  graphql: function (v) {\n    graphql = v;\n  }\n}, 3);\nvar Config = void 0;\nmodule.importSync(\"../components\", {\n  Config: function (v) {\n    Config = v;\n  }\n}, 4);\nvar defaultTemplate = \"<p>Dear {{fullName}},</p>\\n<p>You received following messages at <strong>{{brandName}}</strong>:</p>\\n<ul class=\\\"messages\\\">\\n  {{#each messages}}\\n    <li><span>{{content}}</span></li>\\n  {{/each}}\\n</ul>\\n<p><a href=\\\"{domain}\\\">See all messages on <strong>{{domain}}</strong></a></p>\\n<footer>Powered by <a href=\\\"https://crm.nmma.co/\\\" target=\\\"_blank\\\">Erxes</a>.</footer>\\n\\n<style type=\\\"text/css\\\">\\n    .erxes-mail {\\n        font-family: Arial;\\n        font-size: 13px;\\n    }\\n    .messages {\\n        background: #eee;\\n        list-style: none;\\n        padding: 20px;\\n        margin-bottom: 20px;\\n    }\\n    .messages li {\\n        margin-bottom: 10px;\\n    }\\n    .messages li:last-child {\\n        margin-bottom: 0;\\n    }\\n    .messages li span {\\n        display: inline-block;\\n        background-color: #482b82;\\n        padding: 12px 16px;\\n        border-radius: 5px;\\n        color: #fff;\\n    }\\n    footer {\\n        border-top: 1px solid #ddd;\\n        margin-top: 40px;\\n        padding-top: 10px;\\n        font-weight: bold;\\n    }\\n</style>\";\n\nvar ConfigContainer = function (props) {\n  var brandQuery = props.brandQuery,\n      refetch = props.refetch;\n\n  if (brandQuery.loading) {\n    return null;\n  }\n\n  var configEmail = function (doc, callback) {\n    Meteor.call('brands.configEmail', doc, function () {\n      refetch();\n      callback.apply(undefined, arguments);\n    });\n  };\n\n  var updatedProps = (0, _extends3.default)({}, props, {\n    brand: brandQuery.brandDetail,\n    configEmail: configEmail,\n    defaultTemplate: defaultTemplate\n  });\n  return React.createElement(Config, updatedProps);\n};\n\nConfigContainer.propTypes = {\n  brandQuery: PropTypes.object,\n  refetch: PropTypes.func\n};\nmodule.export(\"default\", exports.default = compose(graphql(gql(_templateObject), {\n  name: 'brandQuery',\n  options: function (_ref) {\n    var brandId = _ref.brandId;\n    return {\n      variables: {\n        brandId: brandId\n      }\n    };\n  }\n}))(ConfigContainer));","map":{"version":3,"sources":["/imports/react-ui/settings/email/containers/Config.js"],"names":["Meteor","module","importSync","v","React","PropTypes","compose","gql","graphql","Config","defaultTemplate","ConfigContainer","brandQuery","props","refetch","loading","configEmail","doc","callback","call","updatedProps","brand","brandDetail","propTypes","object","func","export","exports","default","name","options","brandId","variables"],"mappings":";;;;;;;;;;;;AAAA,IAAIA,eAAJ;AAAWC,OAAOC,UAAP,CAAkB,eAAlB,EAAkC;AAACF,UAAO,UAASG,CAAT,EAAW;AAACH,aAAOG,CAAP;AAAS;AAA7B,CAAlC,EAAiE,CAAjE;AAAoE,IAAIC,cAAJ;AAAUH,OAAOC,UAAP,CAAkB,OAAlB,EAA0B;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACC,YAAMD,CAAN;AAAQ;AAA7B,CAA1B,EAAyD,CAAzD;AAA4D,IAAIE,kBAAJ;AAAcJ,OAAOC,UAAP,CAAkB,YAAlB,EAA+B;AAAC,aAAQ,UAASC,CAAT,EAAW;AAACE,gBAAUF,CAAV;AAAY;AAAjC,CAA/B,EAAkE,CAAlE;AAAqE,IAAIG,gBAAJ;AAAA,IAAYC,YAAZ;AAAA,IAAgBC,gBAAhB;AAAwBP,OAAOC,UAAP,CAAkB,cAAlB,EAAiC;AAACI,WAAQ,UAASH,CAAT,EAAW;AAACG,cAAQH,CAAR;AAAU,GAA/B;AAAgCI,OAAI,UAASJ,CAAT,EAAW;AAACI,UAAIJ,CAAJ;AAAM,GAAtD;AAAuDK,WAAQ,UAASL,CAAT,EAAW;AAACK,cAAQL,CAAR;AAAU;AAArF,CAAjC,EAAwH,CAAxH;AAA2H,IAAIM,eAAJ;AAAWR,OAAOC,UAAP,CAAkB,eAAlB,EAAkC;AAACO,UAAO,UAASN,CAAT,EAAW;AAACM,aAAON,CAAP;AAAS;AAA7B,CAAlC,EAAiE,CAAjE;AAMtY,IAAMO,qkCAAN;;AA0CA,IAAMC,kBAAkB,iBAAS;AAAA,MACvBC,UADuB,GACCC,KADD,CACvBD,UADuB;AAAA,MACXE,OADW,GACCD,KADD,CACXC,OADW;;AAG/B,MAAIF,WAAWG,OAAf,EAAwB;AACtB,WAAO,IAAP;AACD;;AAED,MAAMC,cAAc,UAACC,GAAD,EAAMC,QAAN,EAAmB;AACrClB,WAAOmB,IAAP,CAAY,oBAAZ,EAAkCF,GAAlC,EAAuC,YAAe;AACpDH;AAEAI;AACD,KAJD;AAKD,GAND;;AAQA,MAAME,0CACDP,KADC;AAEJQ,WAAOT,WAAWU,WAFd;AAGJN,4BAHI;AAIJN;AAJI,IAAN;AAOA,SAAO,oBAAC,MAAD,EAAYU,YAAZ,CAAP;AACD,CAvBD;;AAyBAT,gBAAgBY,SAAhB,GAA4B;AAC1BX,cAAYP,UAAUmB,MADI;AAE1BV,WAAST,UAAUoB;AAFO,CAA5B;AAzEAxB,OAAOyB,MAAP,CAAc,SAAd,EAAwBC,QAAQC,OAAR,GA8ETtB,QACbE,QACED,GADF,mBAUE;AACEsB,QAAM,YADR;AAEEC,WAAS,gBAAiB;AAAA,QAAdC,OAAc,QAAdA,OAAc;AACxB,WAAO;AACLC,iBAAW;AACTD;AADS;AADN,KAAP;AAKD;AARH,CAVF,CADa,EAsBbpB,eAtBa,CA9Ef","file":"/imports/react-ui/settings/email/containers/Config.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose, gql, graphql } from 'react-apollo';\nimport { Config } from '../components';\n\nconst defaultTemplate = `<p>Dear {{fullName}},</p>\n<p>You received following messages at <strong>{{brandName}}</strong>:</p>\n<ul class=\"messages\">\n  {{#each messages}}\n    <li><span>{{content}}</span></li>\n  {{/each}}\n</ul>\n<p><a href=\"{domain}\">See all messages on <strong>{{domain}}</strong></a></p>\n<footer>Powered by <a href=\"https://crm.nmma.co/\" target=\"_blank\">Erxes</a>.</footer>\n\n<style type=\"text/css\">\n    .erxes-mail {\n        font-family: Arial;\n        font-size: 13px;\n    }\n    .messages {\n        background: #eee;\n        list-style: none;\n        padding: 20px;\n        margin-bottom: 20px;\n    }\n    .messages li {\n        margin-bottom: 10px;\n    }\n    .messages li:last-child {\n        margin-bottom: 0;\n    }\n    .messages li span {\n        display: inline-block;\n        background-color: #482b82;\n        padding: 12px 16px;\n        border-radius: 5px;\n        color: #fff;\n    }\n    footer {\n        border-top: 1px solid #ddd;\n        margin-top: 40px;\n        padding-top: 10px;\n        font-weight: bold;\n    }\n</style>`;\n\nconst ConfigContainer = props => {\n  const { brandQuery, refetch } = props;\n\n  if (brandQuery.loading) {\n    return null;\n  }\n\n  const configEmail = (doc, callback) => {\n    Meteor.call('brands.configEmail', doc, (...params) => {\n      refetch();\n\n      callback(...params);\n    });\n  };\n\n  const updatedProps = {\n    ...props,\n    brand: brandQuery.brandDetail,\n    configEmail,\n    defaultTemplate,\n  };\n\n  return <Config {...updatedProps} />;\n};\n\nConfigContainer.propTypes = {\n  brandQuery: PropTypes.object,\n  refetch: PropTypes.func,\n};\n\nexport default compose(\n  graphql(\n    gql`\n      query brandDetail($brandId: String!) {\n        brandDetail(_id: $brandId) {\n          _id\n          name\n          emailConfig\n        }\n      }\n    `,\n    {\n      name: 'brandQuery',\n      options: ({ brandId }) => {\n        return {\n          variables: {\n            brandId,\n          },\n        };\n      },\n    },\n  ),\n)(ConfigContainer);\n"]},"hash":"70c6c9b5dfec2e456a9a8f3e20dcc1929ca3b73d"}
