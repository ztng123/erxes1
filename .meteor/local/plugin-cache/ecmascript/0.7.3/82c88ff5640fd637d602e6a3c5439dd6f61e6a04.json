{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react-bootstrap","imported":["Button","Collapse","Label"],"specifiers":[{"kind":"named","imported":"Button","local":"Button"},{"kind":"named","imported":"Collapse","local":"Collapse"},{"kind":"named","imported":"Label","local":"Label"}]},{"source":"meteor/kadira:flow-router","imported":["FlowRouter"],"specifiers":[{"kind":"named","imported":"FlowRouter","local":"FlowRouter"}]},{"source":"/imports/react-ui/layout/components","imported":["Wrapper"],"specifiers":[{"kind":"named","imported":"Wrapper","local":"Wrapper"}]},{"source":"/imports/react-ui/common","imported":["NameCard","EmptyState","Tagger"],"specifiers":[{"kind":"named","imported":"NameCard","local":"NameCard"},{"kind":"named","imported":"EmptyState","local":"EmptyState"},{"kind":"named","imported":"Tagger","local":"Tagger"}]},{"source":"../../containers","imported":["AssignBox"],"specifiers":[{"kind":"named","imported":"AssignBox","local":"AssignBox"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/react-ui/inbox/components/details/RightSidebar.js","filenameRelative":"/imports/react-ui/inbox/components/details/RightSidebar.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/react-ui/inbox/components/details/RightSidebar.js.map","sourceFileName":"/imports/react-ui/inbox/components/details/RightSidebar.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"RightSidebar"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.importSync(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Button = void 0,\n    Collapse = void 0,\n    Label = void 0;\nmodule.importSync(\"react-bootstrap\", {\n  Button: function (v) {\n    Button = v;\n  },\n  Collapse: function (v) {\n    Collapse = v;\n  },\n  Label: function (v) {\n    Label = v;\n  }\n}, 2);\nvar FlowRouter = void 0;\nmodule.importSync(\"meteor/kadira:flow-router\", {\n  FlowRouter: function (v) {\n    FlowRouter = v;\n  }\n}, 3);\nvar Wrapper = void 0;\nmodule.importSync(\"/imports/react-ui/layout/components\", {\n  Wrapper: function (v) {\n    Wrapper = v;\n  }\n}, 4);\nvar NameCard = void 0,\n    EmptyState = void 0,\n    Tagger = void 0;\nmodule.importSync(\"/imports/react-ui/common\", {\n  NameCard: function (v) {\n    NameCard = v;\n  },\n  EmptyState: function (v) {\n    EmptyState = v;\n  },\n  Tagger: function (v) {\n    Tagger = v;\n  }\n}, 5);\nvar AssignBox = void 0;\nmodule.importSync(\"../../containers\", {\n  AssignBox: function (v) {\n    AssignBox = v;\n  }\n}, 6);\nvar propTypes = {\n  conversation: PropTypes.object.isRequired,\n  refetch: PropTypes.func.isRequired\n};\n\nvar RightSidebar = function (_Component) {\n  (0, _inherits3.default)(RightSidebar, _Component);\n\n  function RightSidebar(props) {\n    (0, _classCallCheck3.default)(this, RightSidebar);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    _this.state = {\n      isTaggerVisible: false,\n      isAssignerVisible: false\n    };\n    return _this;\n  }\n\n  RightSidebar.prototype.renderTwitterData = function () {\n    function renderTwitterData() {\n      var customer = this.props.conversation.customer || {};\n      var integration = this.props.conversation.integration || {};\n\n      if (integration.kind === 'twitter') {\n        return React.createElement(\"img\", {\n          src: customer.twitterData.profileImageUrl\n        });\n      }\n\n      return null;\n    }\n\n    return renderTwitterData;\n  }();\n\n  RightSidebar.prototype.renderMessengerData = function () {\n    function renderMessengerData() {\n      var customer = this.props.conversation.customer || {};\n      var integration = this.props.conversation.integration || {};\n\n      if (integration.kind === 'messenger') {\n        return customer.getMessengerCustomData.map(function (data) {\n          return React.createElement(\n            \"li\",\n            {\n              key: data.value\n            },\n            React.createElement(\n              \"span\",\n              null,\n              data.name\n            ),\n            React.createElement(\n              \"span\",\n              {\n                className: \"counter\"\n              },\n              data.value\n            )\n          );\n        });\n      }\n\n      return null;\n    }\n\n    return renderMessengerData;\n  }();\n\n  RightSidebar.prototype.renderFacebookData = function () {\n    function renderFacebookData() {\n      var integration = this.props.conversation.integration || {};\n\n      if (integration.kind === 'facebook') {\n        var link = \"http://facebook.com/\" + this.props.conversation.facebookData.senderId;\n        return React.createElement(\n          \"li\",\n          null,\n          React.createElement(\n            \"span\",\n            null,\n            \"Facebook profile\"\n          ),\n          React.createElement(\n            \"span\",\n            {\n              className: \"counter\"\n            },\n            React.createElement(\n              \"a\",\n              {\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                href: link\n              },\n              \"[view]\"\n            )\n          )\n        );\n      }\n\n      return null;\n    }\n\n    return renderFacebookData;\n  }();\n\n  RightSidebar.prototype.renderPhone = function () {\n    function renderPhone(phone) {\n      if (phone) {\n        return React.createElement(\n          \"li\",\n          null,\n          \"Phone\",\n          React.createElement(\n            \"span\",\n            {\n              className: \"counter\"\n            },\n            phone\n          )\n        );\n      }\n    }\n\n    return renderPhone;\n  }();\n\n  RightSidebar.prototype.render = function () {\n    function render() {\n      var _this2 = this;\n\n      var _Wrapper$Sidebar$Sect = Wrapper.Sidebar.Section,\n          Title = _Wrapper$Sidebar$Sect.Title,\n          QuickButtons = _Wrapper$Sidebar$Sect.QuickButtons;\n      var conversation = this.props.conversation;\n      var assignedUser = conversation.assignedUser,\n          tags = conversation.tags,\n          participatedUsers = conversation.participatedUsers,\n          _conversation$custome = conversation.customer,\n          customer = _conversation$custome === undefined ? {} : _conversation$custome;\n      var _state = this.state,\n          isAssignerVisible = _state.isAssignerVisible,\n          isTaggerVisible = _state.isTaggerVisible;\n      return React.createElement(\n        Wrapper.Sidebar,\n        null,\n        React.createElement(\n          Wrapper.Sidebar.Section,\n          null,\n          React.createElement(\n            Title,\n            null,\n            \"Customer details\"\n          ),\n          React.createElement(\n            \"ul\",\n            {\n              className: \"sidebar-list no-link\"\n            },\n            React.createElement(\n              \"li\",\n              null,\n              React.createElement(NameCard, {\n                customer: customer,\n                avatarSize: 50\n              }),\n              this.renderTwitterData()\n            ),\n            React.createElement(\n              \"li\",\n              null,\n              customer.isUser ? React.createElement(\n                Label,\n                null,\n                \"user\"\n              ) : React.createElement(\n                Label,\n                {\n                  bsStyle: \"primary\"\n                },\n                \"not user\"\n              )\n            ),\n            this.renderPhone(customer.phone),\n            this.renderMessengerData(),\n            this.renderFacebookData()\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"box\"\n            },\n            React.createElement(\n              Button,\n              {\n                href: FlowRouter.path('customers/details', {\n                  id: customer && customer._id\n                }),\n                className: \"action-btn btn-sm\"\n              },\n              \"View customer profile\"\n            )\n          )\n        ),\n        React.createElement(\n          Wrapper.Sidebar.Section,\n          null,\n          React.createElement(\n            Title,\n            null,\n            \"Assigned to\"\n          ),\n          React.createElement(\n            QuickButtons,\n            null,\n            React.createElement(\n              \"a\",\n              {\n                tabIndex: 0,\n                className: \"quick-button\",\n                onClick: function (e) {\n                  e.preventDefault();\n\n                  _this2.setState({\n                    isAssignerVisible: !isAssignerVisible\n                  });\n                }\n              },\n              React.createElement(\"i\", {\n                className: \"ion-gear-a\"\n              })\n            )\n          ),\n          React.createElement(\n            Collapse,\n            {\n              \"in\": isAssignerVisible\n            },\n            React.createElement(\n              \"div\",\n              null,\n              React.createElement(AssignBox, {\n                targets: [conversation._id],\n                className: \"sidebar-accordion\",\n                event: \"onClick\"\n              })\n            )\n          ),\n          React.createElement(\n            \"ul\",\n            {\n              className: \"sidebar-list no-link\"\n            },\n            !assignedUser ? React.createElement(EmptyState, {\n              icon: React.createElement(\"i\", {\n                className: \"ion-person\"\n              }),\n              text: \"Not assigned yet\",\n              size: \"small\"\n            }) : React.createElement(\n              \"li\",\n              null,\n              React.createElement(NameCard, {\n                user: assignedUser,\n                avatarSize: 45\n              })\n            )\n          )\n        ),\n        React.createElement(\n          Wrapper.Sidebar.Section,\n          null,\n          React.createElement(\n            Title,\n            null,\n            \"Participators\"\n          ),\n          React.createElement(\n            \"ul\",\n            {\n              className: \"sidebar-list no-link\"\n            },\n            participatedUsers.map(function (user) {\n              return React.createElement(\n                \"li\",\n                {\n                  key: user._id\n                },\n                React.createElement(NameCard, {\n                  user: user,\n                  avatarSize: 45\n                })\n              );\n            }),\n            participatedUsers.length === 0 ? React.createElement(EmptyState, {\n              icon: React.createElement(\"i\", {\n                className: \"ion-at\"\n              }),\n              text: \"Not participated yet\",\n              size: \"small\"\n            }) : null\n          )\n        ),\n        React.createElement(\n          Wrapper.Sidebar.Section,\n          null,\n          React.createElement(\n            Title,\n            null,\n            \"Tags\"\n          ),\n          React.createElement(\n            QuickButtons,\n            null,\n            React.createElement(\n              \"a\",\n              {\n                tabIndex: 0,\n                className: \"quick-button\",\n                onClick: function (e) {\n                  e.preventDefault();\n\n                  _this2.setState({\n                    isTaggerVisible: !isTaggerVisible\n                  });\n                }\n              },\n              React.createElement(\"i\", {\n                className: \"ion-gear-a\"\n              })\n            )\n          ),\n          React.createElement(\n            Collapse,\n            {\n              \"in\": isTaggerVisible\n            },\n            React.createElement(\n              \"div\",\n              null,\n              React.createElement(Tagger, {\n                type: \"conversation\",\n                targets: [conversation._id],\n                className: \"sidebar-accordion\",\n                event: \"onClick\",\n                afterSave: this.props.refetch\n              })\n            )\n          ),\n          React.createElement(\n            \"ul\",\n            {\n              className: \"sidebar-list no-link\"\n            },\n            tags.map(function (tag) {\n              return React.createElement(\n                \"li\",\n                {\n                  key: tag._id\n                },\n                React.createElement(\"i\", {\n                  className: \"icon ion-pricetag\",\n                  style: {\n                    color: tag.colorCode\n                  }\n                }),\n                tag.name\n              );\n            }),\n            tags.length === 0 ? React.createElement(EmptyState, {\n              icon: React.createElement(\"i\", {\n                className: \"ion-pricetags\"\n              }),\n              text: \"Not tagged yet\",\n              size: \"small\",\n              linkUrl: FlowRouter.path('tags/list', {\n                type: 'conversation'\n              }),\n              linkText: \"Manage tags\"\n            }) : null\n          )\n        )\n      );\n    }\n\n    return render;\n  }();\n\n  return RightSidebar;\n}(Component);\n\nRightSidebar.propTypes = propTypes;\nmodule.export(\"default\", exports.default = RightSidebar);","map":{"version":3,"sources":["/imports/react-ui/inbox/components/details/RightSidebar.js"],"names":["React","Component","module","importSync","v","PropTypes","Button","Collapse","Label","FlowRouter","Wrapper","NameCard","EmptyState","Tagger","AssignBox","propTypes","conversation","object","isRequired","refetch","func","RightSidebar","props","state","isTaggerVisible","isAssignerVisible","renderTwitterData","customer","integration","kind","twitterData","profileImageUrl","renderMessengerData","getMessengerCustomData","map","data","value","name","renderFacebookData","link","facebookData","senderId","renderPhone","phone","render","Sidebar","Section","Title","QuickButtons","assignedUser","tags","participatedUsers","isUser","path","id","_id","e","preventDefault","setState","user","length","tag","color","colorCode","type","export","exports","default"],"mappings":"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","file":"/imports/react-ui/inbox/components/details/RightSidebar.js.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Collapse, Label } from 'react-bootstrap';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Wrapper } from '/imports/react-ui/layout/components';\nimport { NameCard, EmptyState, Tagger } from '/imports/react-ui/common';\n\nimport { AssignBox } from '../../containers';\n\nconst propTypes = {\n  conversation: PropTypes.object.isRequired,\n  refetch: PropTypes.func.isRequired,\n};\n\nclass RightSidebar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isTaggerVisible: false,\n      isAssignerVisible: false,\n    };\n  }\n\n  renderTwitterData() {\n    const customer = this.props.conversation.customer || {};\n    const integration = this.props.conversation.integration || {};\n\n    if (integration.kind === 'twitter') {\n      return <img src={customer.twitterData.profileImageUrl} />;\n    }\n\n    return null;\n  }\n\n  renderMessengerData() {\n    const customer = this.props.conversation.customer || {};\n    const integration = this.props.conversation.integration || {};\n\n    if (integration.kind === 'messenger') {\n      return customer.getMessengerCustomData.map(data => (\n        <li key={data.value}>\n          <span>\n            {data.name}\n          </span>\n          <span className=\"counter\">\n            {data.value}\n          </span>\n        </li>\n      ));\n    }\n\n    return null;\n  }\n\n  renderFacebookData() {\n    const integration = this.props.conversation.integration || {};\n\n    if (integration.kind === 'facebook') {\n      const link = `http://facebook.com/${this.props.conversation.facebookData.senderId}`;\n      return (\n        <li>\n          <span>Facebook profile</span>\n          <span className=\"counter\">\n            <a target=\"_blank\" rel=\"noopener noreferrer\" href={link}>\n              [view]\n            </a>\n          </span>\n        </li>\n      );\n    }\n\n    return null;\n  }\n\n  renderPhone(phone) {\n    if (phone) {\n      return (\n        <li>\n          Phone\n          <span className=\"counter\">{phone}</span>\n        </li>\n      );\n    }\n  }\n\n  render() {\n    const { Title, QuickButtons } = Wrapper.Sidebar.Section;\n    const { conversation } = this.props;\n    const { assignedUser, tags, participatedUsers, customer = {} } = conversation;\n    const { isAssignerVisible, isTaggerVisible } = this.state;\n\n    return (\n      <Wrapper.Sidebar>\n        <Wrapper.Sidebar.Section>\n          <Title>Customer details</Title>\n          <ul className=\"sidebar-list no-link\">\n            <li>\n              <NameCard customer={customer} avatarSize={50} />\n              {this.renderTwitterData()}\n            </li>\n\n            <li>\n              {customer.isUser ? <Label>user</Label> : <Label bsStyle=\"primary\">not user</Label>}\n            </li>\n\n            {this.renderPhone(customer.phone)}\n            {this.renderMessengerData()}\n            {this.renderFacebookData()}\n          </ul>\n          <div className=\"box\">\n            <Button\n              href={FlowRouter.path('customers/details', { id: customer && customer._id })}\n              className=\"action-btn btn-sm\"\n            >\n              View customer profile\n            </Button>\n          </div>\n        </Wrapper.Sidebar.Section>\n\n        <Wrapper.Sidebar.Section>\n          <Title>Assigned to</Title>\n\n          <QuickButtons>\n            <a\n              tabIndex={0}\n              className=\"quick-button\"\n              onClick={e => {\n                e.preventDefault();\n                this.setState({ isAssignerVisible: !isAssignerVisible });\n              }}\n            >\n              <i className=\"ion-gear-a\" />\n            </a>\n          </QuickButtons>\n\n          <Collapse in={isAssignerVisible}>\n            <div>\n              <AssignBox\n                targets={[conversation._id]}\n                className=\"sidebar-accordion\"\n                event=\"onClick\"\n              />\n            </div>\n          </Collapse>\n          <ul className=\"sidebar-list no-link\">\n            {!assignedUser\n              ? <EmptyState\n                  icon={<i className=\"ion-person\" />}\n                  text=\"Not assigned yet\"\n                  size=\"small\"\n                />\n              : <li>\n                  <NameCard user={assignedUser} avatarSize={45} />\n                </li>}\n          </ul>\n        </Wrapper.Sidebar.Section>\n\n        <Wrapper.Sidebar.Section>\n          <Title>Participators</Title>\n          <ul className=\"sidebar-list no-link\">\n            {participatedUsers.map(user => (\n              <li key={user._id}>\n                <NameCard user={user} avatarSize={45} />\n              </li>\n            ))}\n            {participatedUsers.length === 0\n              ? <EmptyState\n                  icon={<i className=\"ion-at\" />}\n                  text=\"Not participated yet\"\n                  size=\"small\"\n                />\n              : null}\n          </ul>\n        </Wrapper.Sidebar.Section>\n\n        <Wrapper.Sidebar.Section>\n          <Title>Tags</Title>\n\n          <QuickButtons>\n            <a\n              tabIndex={0}\n              className=\"quick-button\"\n              onClick={e => {\n                e.preventDefault();\n                this.setState({ isTaggerVisible: !isTaggerVisible });\n              }}\n            >\n              <i className=\"ion-gear-a\" />\n            </a>\n          </QuickButtons>\n\n          <Collapse in={isTaggerVisible}>\n            <div>\n              <Tagger\n                type=\"conversation\"\n                targets={[conversation._id]}\n                className=\"sidebar-accordion\"\n                event=\"onClick\"\n                afterSave={this.props.refetch}\n              />\n            </div>\n          </Collapse>\n\n          <ul className=\"sidebar-list no-link\">\n            {tags.map(tag => (\n              <li key={tag._id}>\n                <i className=\"icon ion-pricetag\" style={{ color: tag.colorCode }} />\n                {tag.name}\n              </li>\n            ))}\n            {tags.length === 0\n              ? <EmptyState\n                  icon={<i className=\"ion-pricetags\" />}\n                  text=\"Not tagged yet\"\n                  size=\"small\"\n                  linkUrl={FlowRouter.path('tags/list', { type: 'conversation' })}\n                  linkText=\"Manage tags\"\n                />\n              : null}\n          </ul>\n        </Wrapper.Sidebar.Section>\n      </Wrapper.Sidebar>\n    );\n  }\n}\n\nRightSidebar.propTypes = propTypes;\n\nexport default RightSidebar;\n"]},"hash":"82c88ff5640fd637d602e6a3c5439dd6f61e6a04"}
